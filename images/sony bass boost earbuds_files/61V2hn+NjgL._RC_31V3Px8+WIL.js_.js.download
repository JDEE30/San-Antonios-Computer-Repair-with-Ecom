(function(v){var t=window.AmazonUIPageJS||window.P,ea=t._namespace||t.attributeErrors,g=ea?ea("DetailPageImageBlockAssets",""):t;g.guardFatal?g.guardFatal(v)(g,window):g.execute(function(){v(g,window)})})(function(v,t,ea){v.register("postMetric",function(){return{postCountMetric:function(g){if("undefined"!==typeof g){var a=t.ue;if(a){var b=a.count(g)||0;a.count(g,b+1)}}},postTimeMetric:function(g,a){if("undefined"!==typeof g&&"undefined"!==typeof a){var b=t.ue;b&&b.count(g,a)}},emitNexusMetric:function(g){t.ue&&
ue.event&&ue.event(g,"VSEImageBlockEvents","vse.VSEImageBlockEvents.3",{ssd:!1})},buildNexusMetric:function(g,a,b,e,k,d,m,c){return{eventSource:"IBCarousel",placementContext:c,clientId:"VSE",userAgentData:navigator.userAgent,titleSessionId:"0",eventName:g,intPayload:a,videoAsin:b,videoAsinList:"",groupType:e,pageUrl:k,pageAsin:d,weblabIds:m}}}});"use strict";v.register("logFailedInteractionMetric",function(){return{isEnabled:!1}});v.register("postEarlyMetric",function(){return null});"use strict";
v.when("jQuery","ImageBlockController","ImageBlockATF","ImageBlockBTF").register("ImageBlock",function(g,a,b,e){g=g.extend(!0,{},b,e);var k=new a(g);v.register("ImageBlockAPI",function(){return k.api});return k});"use strict";v.when("A","jQuery").execute(function(g,a){g.on("a:image:load:landingImage",function(){t.performance&&performance.now&&t.ue&&ue.count&&ue.count("DPLandingImageHighResDownloadTime",performance.now())});g.loadDynamicImage(a("#landingImage"))});"use strict";v.when("ImageBlockATF",
"atf").register("ImageBlockAiryLoader",function(g){function a(b){b&&(v.load.js(b),t.performance&&performance.now&&t.ue&&ue.count&&ue.count("DPAiryDownloadStartTime",t.parseInt(performance.now())))}function b(b){b&&v.load.css(b)}var e=g.airyConfig;e===ea?v.when("ImageBlockBTF").execute(function(g){e=g.airyConfig;a(e.jsUrl);b(e.cssUrl)}):(a(e.jsUrl),b(e.cssUrl))});"use strict";v.when("jQuery","ImageBlockModel","ImageBlockView","imageBlockUtils","ImageBlockState").register("ImageBlockController",function(g,
a,b,e,k){var d={};return function(m){var c=this;c.dispatch=function(b,a){var c=d[b];e.isDefined(c)&&g.each(c,function(b,d){d.call(t,a)})};c.register=function(b,a){e.isDefined(d[b])||(d[b]=[]);"function"===typeof a&&d[b].push(a)};c.model=new a(m,c);c.view=new b(m,c,c.model);c.api=new k(m,c,c.model);c.init=function(){c.model.init();c.view.init()};c.init()}});"use strict";v.when("A","imageBlockUtils").register("ImageBlockModel",function(g,a){function b(b,d,c,e,g,m){a.isDefined(b)&&(l.type=b);a.isDefined(d)&&
(l.index=d);a.isDefined(c)&&(l.thumbnailIndex=c);a.isDefined(e)&&(l.variant=e);a.isDefined(g)&&(l.color=g);l.shoppableScene=m||null}function e(a){b("image",0,0,"MAIN",a||c.landingAsinColor||c.defaultColor,null)}function k(a){a=a.data;x=g.copy(l);b(a.type,a.index,a.thumbnailIndex,a.variant,a.color,a.shoppableScene)}function d(b){k(b);b=g.copy(b);b.data=g.copy(l);p.dispatch("updateView",b)}function m(){x=g.copy(l);e(l.color)}var c,p,l={},x={},H,t;return function(b,a){p=a;c=b;p.register("updateSelection",
d);p.register("updateModel",k);p.register("resetModel",m);this.init=function(){e()};this.getCurrentItem=function(){return g.copy(l)};this.getPreviousItem=function(){return g.copy(x)};this.setCurrentEvent=function(b){H=b};this.getCurrentEvent=function(){return H};this.setImmersiveViewModalInstance=function(b){t=b};this.getImmersiveViewModalInstance=function(){return t};this.updateTitle=function(b){c.title=b}}});"use strict";v.when("ImageBlockBTF","postMetric").register("ImageBlockInitViews",function(g,
a){function b(b,a,e,c,p){function l(b){"click"===b.type&&c.postCountMetric("thumbClick");"click"===b.type&&u.overrideAltImageClickAction?z.dispatch("thumbActionClick",b):z.dispatch("updateSelection",b)}function x(b){u.useClickZoom||z.dispatch("imageClick",b)}function H(b){u.useClickZoom||z.dispatch("imageHover",b)}function Q(b){z.dispatch("button360Click",b)}function y(a){!e.isDefined(a)||"swatchClick"!==a.type&&"updatedData"!==a.type?(n.update(a),"swatchHover"!==a.type&&E.getPreviousItem().thumbnailIndex!==
a.data.thumbnailIndex&&c.postCountMetric(a.data.type+"ThumbnailSelected"),b.trigger("image-block-thumbnail-selected",a.data)):(n.render(a.data.color,!1,a.onload),a={hasComponents:!0,components:[{name:"mainimage"},{name:"thumbnail"}]},"function"===typeof t.markFeatureRender&&t.markFeatureRender("imageblock",a))}function F(b){z.dispatch("resize",b)}function L(b){e.selectThumbnail(b,A)}function P(){"function"===typeof t.markFeatureInteractive&&t.markFeatureInteractive("imageblock",{hasComponents:!0,
components:[{name:"mainimage",events:["click"],alwaysInteractive:!0}]})}function M(){"function"===typeof t.markFeatureInteractive&&t.markFeatureInteractive("imageblock",{hasComponents:!0,components:[{name:"mainimage",events:["hover"],alwaysInteractive:!0},{name:"thumbnail",events:["click","hover"],alwaysInteractive:!0}]});1===g.useIV?v.when("a-modal").execute(function(){P()}):P();u.disableHoverOnAltImages||b.declarative("thumb-action",["mouseenter","mouseleave"],l);b.declarative("thumb-action",["click"],
l);b.declarative("main-image-click",["click"],x);b.declarative("main-image-click",["mouseenter","mouseleave"],H);b.declarative("button-360-click",["click"],Q);b.on("resize",F)}function N(b){var a=b.data,h;a&&"ingress"!==a.type&&"click"===b.type&&(h=b);return h}function h(b){var a=E.getCurrentItem(),h={type:"click"};h.$declarativeParent=b;h.data=a;return h}var n,u,z,E,A;return function(b,e,c){n=this;u=b;z=e;E=c;A=a("#imageBlock #altImages ul");var g=a("#imageBlock .canvas"),m=a("#main-image-container"),
f;n.subViews=[];for(e=0;e<p.length;e++)n.subViews.push(new p[e](b,c,n,z));n.render=function(b,w,e){var c=0;A.find(".item").remove();b=b||E.getCurrentItem().color;a.each(n.subViews,function(f,a){c=a.render(b,c,g,A,m,w,e)||c});var k=A.find(".a-button-selected").closest(".a-declarative");f=h(k)};n.init=function(){A=a("#imageBlock #altImages ul");var b=A.find(".a-button-selected").closest(".a-declarative"),f=b.data("action"),b=b.data(f)||{};b.color=u.landingAsinColor||u.defaultColor;z.dispatch("updateModel",
{data:b});n.render(b.color,!0);u.isDebug&&t.console&&console.log(u);z.register("updateView",y);z.register("selectThumbnail",L);M()};n.update=function(b){a.each(n.subViews,function(f,a){a.update(b)});u.usePeekHover&&("mouseleave"===b.type?z.dispatch("updateSelection",f):"click"===b.type&&(f=N(b)||f))}}}var e=["A","jQuery","imageBlockUtils","postMetric"].concat(g.views);v.when.apply(v,e).register("ImageBlockView",function(){for(var a=arguments[0],d=arguments[1],e=arguments[2],c=arguments[3],g=[],l=
4,x=arguments.length;l<x;l++)g.push(arguments[l]);return b(a,d,e,c,g)})});"use strict";v.when("A","jQuery","imageBlockUtils","ImageBlockLoader","postMetric","logFailedInteractionMetric","postEarlyMetric").register("ImageBlockAltImageView",function(g,a,b,e,k,d,m){function c(d,e,f,q){if(!b.isjQueryObjDefined(d.find(".a-button-selected"))){var w=n.getCurrentItem();if(!q||"chromeless-video"!==w.type||!h.autoplayVideo){q=0;"image"===w.type&&(q=Math.max(x(w.color,w.variant),0));var c=e+q;c>=f&&(q=0,c=e);
e=b.getImageHash(w.color,q,h);-1!==e&&(u.dispatch("updateModel",{data:{index:q,thumbnailIndex:c,variant:e.variant,type:"image",shoppableScene:e.shoppableScene}}),e=d.find(".item").get(c),b.selectGivenThumbnail(a(e),d))}}}function p(e,g,f){g=h.colorImages&&h.colorImages[g];var q=e;b.isDefined(g)&&(a.each(g,function(f,a){e<h.maxAlts&&(b.createThumbnail({type:"image",index:f,thumbnailIndex:e,variant:a.variant,shoppableScene:a.shoppableScene},a.thumb,A,"imageThumbnail"),e++)}),d.isEnabled&&m.logAltImgRequestPlacedOnThumbnails(a,
d,n),c(A,q,e,f));return e}function l(d,e){if("image"===d.type){var f=a("#image-canvas-caption #canvasCaption"),q,w=h.staticStrings,c=h.colorImages,g=d.color,n=d.index;b.isShoppableScenesEnabled()&&d.shoppableScene?q=w.clickSceneTagsToShopProducts:e&&h.useIV?q=w.clickToExpand:c[g]&&c[g][n].hiRes&&h.useHoverZoom?(q=h.useHoverZoomIpad?w.touchToZoom:h.useClickZoom?w.clickToZoom:w.rollOverToZoom,h.hoverZoomIndicator&&(q="\x3cimg src\x3d'"+h.staticImages.hoverZoomIcon+"'/\x3e\x26nbsp;"+q)):h.useIV&&(q=
w.clickToExpand);f.html(q)}}function x(a,d){return b.getIndexForVariant(a,d,h)}function H(d,e){var f="a-dynamic-image";if(!h.acEnabled){var q;a.each(d.main,function(f,a){b.isDefined(q)||(q=parseFloat(a[1]/a[0])<=parseFloat(h.holderRatio)?" a-stretch-vertical":" a-stretch-horizontal")});f+=q}var w=b.getMaxDimensionsOfMainImage(d.main,K,h),c=w[0],g=w[1],w=a("\x3cdiv\x3e\x3c/div\x3e"),c={"max-height":c,"max-width":g};w.addClass(f).css(c).attr({"data-old-hires":d.hiRes,"data-a-manual-replacement":"true",
onload:e}).data("a-dynamic-image",d.main);return w}function t(b){var a=K.css("height");null!==a&&b.find(".imgTagWrapper").css("height",a);b.addClass("selected");h.imgTagWrapperClasses&&b.find(".imgTagWrapper").addClass(h.imgTagWrapperClasses)}function y(a,e){if("image"===a.type||"unavailable"===a.type||"lazy-loaded"===a.type){b.isDefined(e)&&k.postCountMetric("mainImageUpdateOnTwisterVariationClick");var f=b.getImageHash(a.color,a.index,h);if(-1===f)return f={data:{index:0,thumbnailIndex:0,variant:"",
type:"unavailable"}},b.lazyLoadingRequired(a,n,h)||(u.dispatch("updateModel",f),b.showUnavailable(a.color)),-1;var q=J.find(".item.itemNo"+a.thumbnailIndex);if(!b.isjQueryObjDefined(q)){var q=a.thumbnailIndex,w=H(f,e),c;if(b.isShoppableScenesEnabled()&&f.shoppableScene){c="desktop-dp-atf-ib-shoppablescenes-tags-"+q;"function"==typeof uet&&uet("bb",c,{wb:1});w.attr("data-a-image-name","shoppable-scene");var z=J.find(".mirai-scene-image-block-template").clone().removeClass("mirai-scene-image-block-template aok-hidden").addClass("mirai-shoppable-scene");
z.addClass("celwidget").attr("cel_widget_id",c);z.children("span").css("display","inline-block");u.dispatch("initialize-shoppable-scene",{index:q,shoppableScene:f.shoppableScene,imageSource:f.hiRes||f.large||f.lowRes,$tagPlaceholder:z.find(".mirai-scene-tag-placeholder"),$viewProductsButton:z.find(".mirai-scene-view-products-button")});"function"==typeof uet&&uet("cf",c,{wb:1});c=z}else c=J.find(".mainImageTemplate").clone().removeClass("template mainImageTemplate");c.addClass("image item itemNo"+
q+" maintain-height");c.find(".placeHolder").replaceWith(w);J.find(".list").append(c);g.loadImageManually(w);q=c}t(q);u.dispatch("loadMagnifier");l(a);h.useIV&&b.isDefined(f.hiRes)&&q.css("cursor","pointer");a.isUserGenerated&&(q=n.getPreviousItem(),w=a.variant,b.isDefined(w)&&q.thumbnailIndex!==a.thumbnailIndex&&(d.isEnabled&&m.logAltImgRequestServed(d),k.postCountMetric("ImageThumbnailSelectedVariant:"+w),0===w.indexOf("IG")&&(k.postCountMetric("IGImageSelectedVariant:"+w),k.postCountMetric("IGImageSelectedEvent:"+
a.interaction))));g.trigger("dp:image-block:update",f)}}function F(a){var d=Math.max(x(a.color,n.getCurrentItem().variant),0),d=b.getImageHash(a.color,d,h);if(-1===d)return b.lazyLoadingRequired(a,n,h)||b.showUnavailable(a.color),-1;a=J.find(".swatchHoverExp");var f=H(d);a.find(".imgTagWrapper").html(f);g.loadImageManually(f);k.postCountMetric("mainImageUpdateOnTwisterVariationHover");t(a);g.trigger("dp:image-block:update",d)}function L(d,e){b.lazyLoadingRequired(d,n,h)||(a("#imageBlock").css("opacity",
"1"),J.css("opacity","1"),b.spinner(J,!1),J.find("li").removeClass("selected"),a("#image-canvas-caption #canvasCaption").empty(),b.hideUnavailable(),e&&J.find(".list .item").remove())}function P(){var d=J.find(".item .imgTagWrapper"),e=b.getContainerHeight(K,h.holderRatio,h.holderMaxHeight);0<e&&(K.height(e),d.height(e));J.find("img.a-dynamic-image").each(function(){var f=a(this);f.data("a-manual-replacement")&&g.loadDynamicImage(this);var d=f.data("a-dynamic-image"),d=b.getMaxDimensionsOfMainImage(d,
K,h);f.css({"max-height":d[0]+"px","max-width":d[1]+"px"})})}function M(b){l(n.getCurrentItem(),"mouseenter"===b.type)}var N,h,n,u,z,E,A,J,K,G;g.on("triggerImageAjax",function(a){var d=n.getCurrentItem().color;h.colorImages[d]||(h.colorImages[d]=a);a={type:"updatedData",data:n.getCurrentItem()};u.dispatch("updateView",a);(d=h.colorToAsin[d])&&d.asin&&v.register(b.rankedImagesReadyEvent(d.asin))});return function(a,d,f,e){N=this;h=a;n=d;u=e;h.colorImages[h.landingAsinColor]=h.colorImages[h.defaultColor];
N.render=function(a,f,d,e,q,c,g){J=d;A=e;K=q;G=p(f,a,c);c||(a=n.getCurrentItem(),b.lazyLoadingRequired(a,n,h)&&u.dispatch("updateModel",{data:{type:"lazy-loaded"}}));L(n.getCurrentItem(),!c);y(n.getCurrentItem(),g);return G};b.isImageBlockGridViewEnabled()?N.update=function(a){var f=a.data;n.setCurrentEvent(a);"ingress"!==f.type&&"swatchHover"!==a.type&&("mouseenter"===a.type?(E&&clearTimeout(E),E=setTimeout(function(){L(a.data,!1)},b.getHoveringDelayTimer())):"mouseleave"===a.type?E&&clearTimeout(E):
"click"===a.type&&L(a.data,!1));"swatchHover"===a.type?("ingress"!==f.type&&L(a.data,!1),f.color===n.getCurrentItem().color?y(n.getCurrentItem()):a.captured||-1===F(f)||(a.captured=!0)):"image"===f.type&&(f.interaction=a.type,f.isUserGenerated=!0,"mouseenter"===a.type?(k.postCountMetric("dpcc_imageThumbHovered_"+(f.thumbnailIndex+1)+"_"+G),z&&clearTimeout(z),z=setTimeout(function(){y(f);h.usePeekHover||b.selectGivenThumbnail(a.$declarativeParent,A)},b.getHoveringDelayTimer())):"mouseleave"===a.type?
z&&clearTimeout(z):"click"===a.type&&(y(f),b.selectGivenThumbnail(a.$declarativeParent,A),k.postCountMetric("dpcc_imageThumbClicked_total"),k.postCountMetric("dpcc_imageThumbClicked_"+(f.thumbnailIndex+1)+"_"+G)))}:N.update=function(a){var f=a.data;n.setCurrentEvent(a);"ingress"!==f.type&&L(a.data,!1);"swatchHover"===a.type?f.color===n.getCurrentItem().color?y(n.getCurrentItem()):a.captured||-1===F(f)||(a.captured=!0):"image"===f.type&&(f.interaction=a.type,f.isUserGenerated=!0,"mouseenter"===a.type&&
k.postCountMetric("dpcc_imageThumbHovered_"+(f.thumbnailIndex+1)+"_"+G),y(f),h.usePeekHover&&"click"!==a.type||(b.selectGivenThumbnail(a.$declarativeParent,A),"click"===a.type&&(k.postCountMetric("dpcc_imageThumbClicked_total"),k.postCountMetric("dpcc_imageThumbClicked_"+(f.thumbnailIndex+1)+"_"+G))))};h.overrideAltImageClickAction&&b.addTag("clickEnabledOnAltImages");u.register("imageHover",M);u.register("resize",P)}});"use strict";v.when("A","jQuery","imageBlockUtils","postMetric","logFailedInteractionMetric",
"postEarlyMetric").register("ImageBlockMagnifierView",function(g,a,b,e,k,d){function m(a){P?a.css("cursor","url('"+H.staticImages.zoomIn+"'), auto"):(a.css("cursor","-webkit-zoom-in"),a.css("cursor","-moz-zoom-in"),a.css("cursor","zoom-in"))}function c(a){var d=a.match(/\._((\w|,|\.)+)_\.(gif|jpg|png)$/i);a={};if(b.isDefined(d))for(var d=d[1].split("_"),h=0;h<d.length;h++){var e=d[h].match(/^([A-Z]+)(\d+(\.\d+)?)$/);b.isDefined(e)&&(a[e[1]]=parseInt(e[2],10))}return a}function p(l,p){function h(){var a;
p.useClickZoom?(a=p.offsetInClickZoom,a=[Math.min(1,Math.max(0,q[0]-(D[0]+a))/(D[2]-2*a)),Math.min(1,Math.max(0,q[1]-(D[1]+a))/(D[3]-2*a))]):a=f&&f.updatePosition();if(a&&B&&B.detailSize){var b=[B.detailSize[0]-B.rect.width,B.detailSize[1]-B.rect.height];g.capabilities.rtl?B.detailImage.get(0).style.right=-(a[0]*b[0])+"px":B.detailImage.get(0).style.left=-(a[0]*b[0])+"px";B.detailImage.get(0).style.top=-(a[1]*b[1])+"px"}}function n(a){return a.offsetParent().hasClass("a-dynamic-image-container")}
function u(b){var f=T?b.originalEvent.touches[0]||b.originalEvent.changedTouches[0]:"";q=T?[f.pageX,f.pageY]:[b.pageX,b.pageY];if(g.capabilities.rtl){var d=a(t).width();q=T?[d-f.pageX,f.pageY]:[d-b.pageX,b.pageY]}}function z(a){T&&a.preventDefault();u(a);p.useClickZoom?a=[D[0],D[1],D[0]+D[2],D[1]+D[3]]:(a=f?f.offset:l.offsetParent().offset(),a=H.acEnabled?[a.left,a.top,F.width()+a.left,F.height()+a.top]:[w[0]+a.left,w[1]+a.top,w[0]+w[2]+a.left,w[1]+w[3]+a.top]);q[0]<a[0]||q[1]<a[1]||q[0]>=a[2]||q[1]>=
a[3]||H.acEnabled&&!n(l)?(p.fadeMagnifier?Y||(Y=!0,da=setTimeout(function(){E(!0)},500)):p.useClickZoom||E(),C&&(C=!1,clearTimeout(ca))):(C||(C=!0,ca=setTimeout(function(){e.postCountMetric("dppc_hoverZoomOpened");k.isEnabled&&d.logHoverZoomRequestServed(k)},1E3)),p.fadeMagnifier&&Y&&(Y=!1,clearTimeout(da)),h())}function E(b){b&&x.suppressMagnifier(!0);if(L&&(B&&B.hide(),f&&(f.destroy(),f=null),L=!1,T?(l.unbind("touchmove.magnifier touchstart.magnifier touchend.magnifier"),a(document).trigger("disengaged.magnifier")):
a(document).unbind("mousemove.magnifier").trigger("disengaged.magnifier"),y(),b))l.one("click.magnifier touchstart.magnifier",function(a){A(a,!0)})}function A(b,d){d&&x.suppressMagnifier(!1);if(!L&&!W&&(0===aa&&(e.postCountMetric("dppc_hoverTime",new Date-(t.ue&&t.ue.t0||0)),aa=1),Q[U]||(e.postCountMetric("dppc_hoverMain"),Q[U]=1),w=[l.position().left,l.position().top,l.width(),l.height()],U&&(u(b),B?B.refit().show():B=new oa,p.useClickZoom||(f=f||new V),D=B.getWindowSize(),h()),L=!0,T?(l.unbind("touchstart.magnifier touchmove.magnifier").bind("touchmove.magnifier",
z).bind("touchend.magnifier",E),a(document).trigger("engaged.magnifier")):(H.acEnabled?F.unbind("mousemove.magnifier"):l.unbind("mousemove.magnifier"),a(document).trigger("engaged.magnifier").bind("mousemove.magnifier",z)),d)){var c=a("#zoomWindow");if(0<c.length)c.one("click.magnifier touchend.magnifier",function(a){E(!0)})}}function y(){p.useHoverZoom&&(T?l.bind("touchstart.magnifier touchmove.magnifier",A):H.acEnabled?n(l)&&F.bind("mousemove.magnifier",A):l.bind("mousemove.magnifier",A))}var x=
this,F=l.offsetParent(),v={detailImageUrl:l.attr("data-old-hires"),location:"over",locationElement:l,prelaod:"ready",zIndex:50,offsetInClickZoom:50};p=a.extend(v,p);p.adjustment=[10,0,-10,0];var B=null,f=null,q=null,w=null,D=null,I={"null":1,"":1,undefined:1},L=!1,W=!1,U=p.detailImageUrl,T=p.useHoverZoomIpad||0,aa=0,Q={},V=function(){function b(a){var f=Math.round(Math.min(l.width(),B.rect.width/a));a=Math.round(Math.min(l.height(),B.rect.height/a));c.css({width:f,height:a});d=[f,a]}var f=this,d=
[0,0],h=(B.detailSize&&B.detailSize[0]||5E8)/w[2],e=(B.detailSize&&B.detailSize[1]||5E8)/w[3],h=e>h?e:h;a("#magnifierLens").remove();var c=a("\x3cdiv id\x3d'magnifierLens' /\x3e").css({position:"absolute"});p.generalImageUrls.zoomLensBackground&&c.css({backgroundImage:"url("+p.generalImageUrls.zoomLensBackground+")"});H.showMagnifierOnHover?m(c):c.css("cursor","pointer");f.updatePosition=function(){var a=[w[2]-d[0],w[3]-d[1]],b=0>=a[0]?.5:Math.max(0,Math.min(1,(q[0]-d[0]/2-w[0]-f.offset.left)/a[0])),
h=0>=a[1]?.5:Math.max(0,Math.min(1,(q[1]-d[1]/2-w[1]-f.offset.top)/a[1])),e=w[0]+Math.round(b*a[0]),a=w[1]+Math.round(h*a[1]);c.get(0).style.left=e+"px";c.get(0).style.top=a+"px";return[b,h]};f.destroy=function(){c.remove()};f.offset=l.offsetParent().offset();b(h);f.updatePosition();c.appendTo(l.parent());B.detailImage[0].complete||B.detailImage.load(function(){var a=B.detailImage.width()/w[2];b(a);f.updatePosition()})};V.preload=function(){x.preload(p.generalImageUrls.lensBackgroundUrl)};var oa=
function(){function f(){var d={};if("over"===p.location){var d=p.useClickZoom,h={},c=a("#leftCol"),g=a("#centerCol"),w=a("#rightCol"),m=a("#hover-zoom-end"),k=a("#actionPanelContainer"),u=b.isjQueryObjDefined(c)?c.outerHeight():g.outerHeight();h.top=b.isjQueryObjDefined(c)?c.offset().top:g.offset().top;h.bottom=u+h.top;h.right=b.isjQueryObjDefined(w)?w.offset().left:k.offset().left;h.left=d?0:c.offset().left+c.outerWidth();b.isjQueryObjDefined(m)&&m.offset().top>h.bottom&&(h.bottom=m.offset().top);
d=h}else"right"===p.location&&(d=l.offset(),d={left:d.left+l.outerWidth(),top:d.top,right:d.left+l.outerWidth()+400,bottom:d.top+400});p.minHeightElement&&(d.bottom=Math.max(d.bottom,d.top+a(p.minHeightElement).outerHeight()));d.bottom=Math.min(d.bottom,a(t).scrollTop()+a(t).height());d.left+=q[0];d.top+=q[1];d.right+=q[2];d.bottom+=q[3];d.width=d.right-d.left;d.height=d.bottom-d.top;p.enhancedHoverOverlay&&b.isDefined(t.pageXOffset)&&(h=a(t).width(),d.width=h-d.left+t.pageXOffset-18,d.height-=14);
n.css({left:d.left,top:d.top,width:d.width,height:d.height});e.rect=d;return e}function d(a){var b=new Image;e.detailSize=[0,0];b.onload=function(){e.detailSize=[b.width,b.height];h()};b.src=a.attr("src");if(0<b.width&&0<b.height)e.detailSize=[b.width,b.height];else if(p.detailImageSize)e.detailSize=p.detailImageSize;else{a=c(b.src);var f=w[2]/w[3];a.SS||a.AA?(a=a.SS||a.AA,e.detailSize=[a,a]):a.SX?e.detailSize=[a.SX,Math.round(a.SX/f)]:a.SY?e.detailSize=[Math.round(a.SY*f),a.SY]:a.SL&&(e.detailSize=
1<=f?[a.SL,Math.round(a.SL/f)]:[Math.round(a.SL*f),a.SL])}}var e=this,q=p.adjustment;a("#zoomWindow").remove();var g={overflow:"hidden",position:"absolute",backgroundColor:"white",zIndex:p.zIndex};p.enhancedHoverOverlay&&(g.boxShadow="0 6px 8px 2px rgba(0,0,0,.25)",g.border="1px solid #949494",g.borderColor="rgb(148,148,148)");var n=a("\x3cdiv id\x3d'zoomWindow' /\x3e").css(g);p.fadeMagnifier&&n.fadeIn(200);p.useClickZoom&&(P?n.css("cursor",'url("'+p.zoomOutIcon+'"), auto'):(n.css("cursor","-webkit-zoom-out"),
n.css("cursor","-moz-zoom-out"),n.css("cursor","zoom-out")));e.updateImage=function(b){b=a("\x3cimg id\x3d'detailImg' src\x3d'"+b+"'/\x3e").css("position","absolute");e.detailImage&&e.detailImage.remove();n.append(b);a(document).trigger("updated.magnifier");e.detailImage=b;d(e.detailImage)};e.refit=function(){f();d(e.detailImage);return e};p.fadeMagnifier?(e.show=function(){n.fadeIn(200);return e},e.hide=function(){n.fadeOut(200);return e}):(e.show=function(){n.show();return e},e.hide=function(){n.hide();
return e});e.destroy=function(){n.remove();return e};e.getWindowSize=function(){return[e.rect.left,e.rect.top,e.rect.width,e.rect.height]};e.updateImage(U);f();n.appendTo(document.body)},Y=!1,da,C=!1,ca;x.preload=function(b){b=a.makeArray(b);for(var f=b.length,d=0;d<f;d++)b[d]instanceof Array?x.preload(b[d]):"string"===typeof b[d]&&b[d]&&!I[b[d]]&&(I[b[d]]=new Image,I[b[d]].src=b[d])};x.changeImage=function(b,f){L&&E();U=f;l.attr("src",b);x.preload(b);w=[l.position().left,l.position().top,l.width(),
l.height()];f&&("immediately"===p.preload?x.preload(f,!0):a(t).ready(function(){x.preload(f)}),B?B.updateImage(f):l.attr("data-old-hires",f))};x.destroy=function(){H.acEnabled?F.unbind("touchstart touchstart.magnifier touchmove.magnifier mousemove.magnifier"):l.unbind("touchstart touchstart.magnifier touchmove.magnifier mousemove.magnifier");a(document).unbind("mousemove.magnifier");f&&f.destroy();f=null;B&&B.destroy();B=null};x.detailImage=function(){return B.detailImage};x.suppressMagnifier=function(a){W=
a};x.isEngaged=function(){return L};x.engageMagnifier=A;x.disengageMagnifier=E;l[0].complete?y():l.one("load",y);x.preload(l.attr("src"));t.performance&&performance.now&&t.ue&&ue.count&&ue.count("MagnifierImageDownload",performance.now());if(p.preload){var ja=p.detailImageUrl,v=function(){x.preload(ja,!0);p.useClickZoom||V.preload()},X=p.preload;X.constructor!==Array&&(X=[X]);for(var r=0;r<X.length;r++)if("immediately"===X[r])v();else if(a(t)[X[r]])a(t)[X[r]](v);else a(t).bind(X[r],v)}return x}function l(){if(H.useHoverZoom){var e=
{adjustment:[0,0,1,1],generalImageUrls:H.staticImages,location:"over",minHeightElement:"#imageBlock",preload:"ready",zIndex:199,useHoverZoomIpad:H.useHoverZoomIpad,useHoverZoom:H.useHoverZoom,useClickZoom:H.useClickZoom,fadeMagnifier:H.fadeMagnifier,zoomOutIcon:H.staticImages.zoomOutCur,enhancedHoverOverlay:H.enhancedHoverOverlay||H.atfEnhancedHoverOverlay};F&&(F.destroy(),F=ea);var c=L.find(".image.item.selected:not(.mirai-shoppable-scene) img[data-old-hires]").not("[data-old-hires\x3d'']");b.isjQueryObjDefined(c)?
H.useClickZoom?(c.one("click.loadmagnifier touchstart.loadmagnifier",function(a){F=new p(c,e);F.engageMagnifier(a,!0)}),P?c.css("cursor",'url("'+H.staticImages.zoomInCur+'"), auto'):(c.css("cursor","-webkit-zoom-in"),c.css("cursor","-moz-zoom-in"),c.css("cursor","zoom-in"))):F=new p(c,e):k.isEnabled&&d.logHoverZoomApplicability(a,k)}}var x,H,v,y,F,L,P=navigator.userAgent.match(/msie|trident/i);return function(a,b,d,e){x=this;H=a;v=b;k.refToModel=v;y=e;x.render=function(a,b,d,e,h,c){L=d;F&&(F.destroy(),
F=ea)};x.update=function(a){};y.register("loadMagnifier",l);y.register("resize",l)}});"use strict";v.when("A","jQuery","imageBlockUtils","postMetric").register("ImageBlockTwisterView",function(g,a,b,e){function k(a,d,g){a=(a=g?g:b.getColorFromState(d.getState().hovered_variations,c))&&""!==a?a:c.defaultColor;l.dispatch("updateView",{type:"swatchHover",data:{color:a}});e.postCountMetric("swatchHover")}function d(a,d,g,m){a=(a=m?m:b.getColorFromState(d.getState().selected_variations,c))&&""!==a?a:c.defaultColor;
a===p.getCurrentItem().color?"function"===typeof g&&g():(l.dispatch("updateSelection",{type:"swatchClick",data:{color:a},onload:function(){var a={hasComponents:!0,components:[{name:"mainImage"}]};"function"===typeof t.markFeatureRender&&t.markFeatureRender("imageblock",a);g()}}),e.postCountMetric("swatchClick"))}var m,c,p,l;return function(a,b,e,y){m=this;c=a;p=b;l=y;g.on("image-block-twister-swatch-hover",k);g.on("image-block-twister-swatch-click",d);m.render=function(a,b,d,e,c){};m.update=function(a){}}});
"use strict";v.when("A","jQuery","Airy","imageBlockUtils","ImageBlockLoader","postMetric","vse_ns_videoPlayer").register("ImageBlockVideoView",function(g,a,b,e,k,d,m){function c(b,f,d,c){!h.autoplayVideo||ha||h.useChromelessVideoPlayer?!e.isjQueryObjDefined(b.find(".a-button-selected"))&&(d=n.getCurrentItem(),!c||h.prioritizeVideos||"chromeless-video"===d.type&&h.autoplayVideo)&&(c=e.getVideoHash(d.color,0,h),-1!==c&&(f+=0,u.dispatch("updateModel",{data:{index:0,thumbnailIndex:f,variant:c.variant,
type:h.useChromelessVideoPlayer?"chromeless-video":"chromeful-video"}}),f=b.find(".item").get(f),e.selectGivenThumbnail(a(f),b))):(e.selectGivenThumbnail(b.find("img:last"),b),e.fadeToThumbnail(b.find("img").length-1,J,b))}function p(a){var b=n.getCurrentItem().color;if(h.useChildVideos&&!h.colorToVideo[b]){var f=function(){if(a){h.colorToVideo[b]=a;var f={type:"updatedData",data:n.getCurrentItem()};u.dispatch("updateView",f)}};h.lazyLoadExperienceDisabled?f():v.when(e.rankedImagesReadyEvent(h.colorToAsin[b].asin)).execute(function(){f()})}}
function l(a){if(!h.useChildVideos)return e.lazyLoadingRequired(n.getCurrentItem(),n,h)?void 0:h.videos;if(h.colorToVideo[a])return h.colorToVideo[a];var b=h.colorToAsin[a];if(b&&b.asin){var f={};f.params={asin:b.asin,productGroupID:h.productGroupID,useAiryVideoPlayer:!0,useChromelessVideoPlayer:h.useChromelessVideoPlayer,isUDP:h.isUDP};h.isDPXFeatureEnabled||(f.success=function(a){p(a)},k.load("/gp/product/features/apparel-main-image/videos.html",f));return h.colorToVideo&&h.colorToVideo[a]}}function x(){G&&
(G.hide(),E.parent().css("z-index",-1),A.hide())}function H(){u.dispatch("selectThumbnail",e.useTabbedImmersiveView(h)?1:0)}function Q(f,h,c,q){return b.embed({isShowFirstFrameWhenReadyEnabled:!0,parentElement:f[0],streamingUrls:h.url,swfUrl:c.swfUrl,foresterMetadataParams:c.foresterMetadataParams,backgroundColor:"transparent",flashParams:{wmode:"transparent"},experiments:{supportChromelessPlayback:!0},bindings:{canplay:function(){var a=e.isjQueryObjDefined(f.find("video"))?"HTML5":"FLASH";d.postCountMetric("dppc_chromelessVideo:"+
a)},playing:function(){f.parent().css("z-index",8)},videounsupported:function(){H();d.postCountMetric("dppc_chromelessVideo:VIDEO_UNSUPPORTED")},error:function(){H();d.postCountMetric("dppc_chromelessVideo:ERROR")},ended:function(){G.seek(0)}},cuePoints:[{values:h.durationSeconds-1,type:"position",callback:function(b,d,e){b=e.durationSeconds-e.playheadTimeSeconds;f.parent().css("background-color","white").find(".airy-renderer-container").fadeTo(1E3*b,.1,function(){f.parent().css({"background-color":"transparent",
"z-index":-1});H();a(this).show().css("opacity",1)})}}]})}function y(b){if("chromeful-video"===b.type||"chromeless-video"===b.type){var f=e.getVideoHash(b.color,b.index,h);if(-1===f)return-1;if("chromeful-video"===b.type){b=b.thumbnailIndex+1;var d=J.width()/J.height(),c=parseInt(f.videoWidth,10),m=parseInt(f.videoHeight,10);e.updateAspectRatio(d,c,m,E);G?(G.show(),e.loadMediaIntoAiry(G,f,S,h.tabletWeb)):G=h.tabletWeb?q:e.createAiryInstanceForChromefulNotUseTabbedImmersiveView(E,f,S,null,h.autoplayVideo,
J,A,z,b,h.useTabbedImmersiveView,D,w,I);b:if(e.useTabbedImmersiveView(h)){if(1<e.getVideosCount(n.getCurrentItem().color,h)){if(e.isDefined(K)){A.show();break b}K=a('\x3ca class\x3d"more-videos"\x3e\x3c/a\x3e').attr("href","#").text(h.staticStrings.watchMoreVideos);A.find("#videoCaption").append(K);g.declarative.create(K,"videoIngressClick",B)}e.playVideoInImmersiveView(h,n.getCurrentItem().color)&&(g.declarative.create(E,"videoIngressClick",B),E.attr&&E.attr("data-ux-click",""),E.children().css("z-index",
"-1"),E.css("display","inline-block"))}else A.find("#videoCaption").text(h.staticStrings.playVideo),A.show();f=G;h.autoplayVideo&&f&&!ha&&(e.toggleVideoCaption(A),f.setVolume(0),f.show(),f.play(),ha=!0)}else G?(G.show(),e.loadMediaIntoAiry(G,f,S,h.tabletWeb),G.play(),A.show()):(G=Q(E,f,S))&&G.play()}}function F(b,f,q){var n=l(f);f=b;var m=e.isDefined(n)&&0<n.length&&h.alwaysIncludeVideo?1:0;e.isDefined(n)&&0<n.length&&!h.alwaysIncludeVideo&&b===h.maxAlts&&d.postCountMetric("IBVideoDrop");m&&b===h.maxAlts&&
(z.find(".item:last").remove(),b--);e.isDefined(n)&&(a.each(n,function(f,c){if(b<h.maxAlts){var q=h.useChromelessVideoPlayer?"chromeless-video":"chromeful-video",g={type:q,index:f,thumbnailIndex:b,variant:c.variant};B={type:"video-ingress",index:f,thumbnailIndex:b,variant:c.variant};e.useTabbedImmersiveView(h)&&("chromeful-video"===q&&(V+=" videoBlockIngress  videoBlockDarkIngress",c.thumb=c.thumb.replace("_PKmb-play-button-overlay-thumb","")),h.altsOnLeft||(V+=" a-align-top"));e.isImageBlockGridViewEnabled()&&
(V+=" videoImageBlockGridView");e.createThumbnail(g,c.thumb,z,V);if(2===h.dp60VideoPosition){var m=z,g=h.dp60VideoPosition;if(0!==g){var k=m.children(".imageThumbnail"),m=m.children(".videoBlockIngress");k&&m&&k[g-1]&&a(k[g-1]).before(m[0])}}e.useTabbedImmersiveView(h)&&(L(z.find(".videoBlockIngress img"),h.videoIngressATFSlateThumbURL),g=1<n.length?"multiple-videos":"one-video",(k=1<n.length?n.length+" "+h.staticStrings.multipleVideos:h.staticStrings.singleVideo)&&z.find(".videoBlockIngress").append(z.find("#videoCount_template").clone().text(k).attr("id",
"videoCount")).addClass(g));g=d.buildNexusMetric("ib.thumbnailImpression",b+1,c.mediaObjectId,c.groupType,D,w,I,R);d.emitNexusMetric(g);g=d.buildNexusMetric("ib.thumbnailRender",b+1,c.mediaObjectId,c.groupType,D,w,I,R);d.emitNexusMetric(g);aa||(aa=!0,d.postCountMetric("chromeless-video"===q?"dppc_chromelessVideoAvailable":"dppc_chromefulVideoAvailable"));b++}if(e.useTabbedImmersiveView(h))return!1}),c(z,f,b,q),h.imageBlockRenderingStartTime&&d.postTimeMetric("vse_desktop_ib_video_ingress_enable_duration",
g.now()-h.imageBlockRenderingStartTime));return b}function L(a,b){var f=a.attr("src");if(f&&b){a.attr("src",b);var d=new Image;d.onload=function(b){a.attr("src",f)};d.src=f}}function P(a){G&&G.pause();a.data=B;a.clickTimeStamp=a.$event.timeStamp;var b="a"===a.targetTag?"dpcc_videoIngressLink":"dpcc_videoIngressSlate";u.dispatch("imageClick",a);d.postTimeMetric("dpcc_vse_videoingressclick",a.$event.timeStamp);a=d.buildNexusMetric("ib.thumbnailClick",a.data.thumbnailIndex+1,h.videos[0].mediaObjectId,
h.videos[0].groupType,D,w,I,R);d.emitNexusMetric(a);d.postCountMetric(b)}function M(a){q=a.player;q.hide=function(){q.pause();g.$("#main-video-container").find(".vse-player-container").hide()};q.show=function(){g.$("#main-video-container").find(".vse-player-container").show();q.play()};q.getMediaSourceInfo=function(){return e.getMediaSourceInfo()}}var N,h,n,u,z,E,A,J,K,G,S,B,f,q,w,D,I,R,W,U,T,aa=!1,ha=!1,V="videoThumbnail";return function(b,c,q,k){N=this;h=b;n=c;u=k;S=h.airyConfig;I=h.contentWeblab&&
h.contentWeblab+":"+h.contentWeblabTreatment;h.colorToVideo={};h.colorToVideo[h.landingAsinColor]=h.colorToVideo[h.defaultColor]=h.videos;h.tabletWeb?(W="tablet",R="applicationType.ImageBlock.vse_ib_tablet_web"):g.capabilities.tablet?(W="tablet",g.capabilities.isAmazonApp&&(R="applicationType.ImageBlock.vse_ib_tablet_app")):(W="desktop",R="desktop_web.ImageBlock.vse_ib_iv");N.render=function(b,d,c,q,k,l){x();z=q;E=k.find("#main-video-container");A=E.parent().find("#video-canvas-caption");J=a("#main-image-container");
D=t.location.href;c=n.getCurrentItem().color;!0===l?w=h.mediaAsin:(w=h.colorToAsin[c]&&h.colorToAsin[c].asin,w=e.isDefined(w)?w:h.mediaAsin);h.useChromelessVideoPlayer||E.addClass("chromeful-container");f=F(d,b,l);y(n.getCurrentItem());e.useTabbedImmersiveView(h)&&g.declarative("videoIngressClick",["click"],P);c=n.getCurrentItem().color;b=e.getVideoHash(c,0,h);-1!==b&&h.tabletWeb&&(b=e.getNilgiriServiceAjaxRequest(h,c,b),m.get(g,"#main-video-container",b,function(){g.$("#main-video-container").find(".vse-player-container").hide()},
function(){g.$("#imageBlock #altImages ul").find("li.videoThumbnail").hide()}));return f};e.isImageBlockGridViewEnabled()?N.update=function(a){var b=a.data;"ingress"===b.type||"swatchHover"===a.type||e.lazyLoadingRequired(b,n,h)||("mouseenter"===a.type?(T&&clearTimeout(T),T=setTimeout(function(){x()},e.getHoveringDelayTimer())):"mouseleave"===a.type?T&&clearTimeout(T):"click"===a.type&&x());if("swatchHover"===a.type)"ingress"===b.type||e.lazyLoadingRequired(b,n,h)||x(),b.color===n.getCurrentItem().color?
y(n.getCurrentItem()):a.captured||e.lazyLoadingRequired(b,n,h)&&!e.lazyLoadOnHoverEnabled(h)&&y(n.getCurrentItem());else if("chromeful-video"===b.type||"chromeless-video"===b.type){var c=e.getVideoHash(b.color,b.index,h);"mouseenter"===a.type?(d.postCountMetric("dpcc_videoThumbHovered_"+(b.thumbnailIndex+1)+"_"+f),"chromeless-video"===b.type&&(c=d.buildNexusMetric("ib.thumbnailHover",b.thumbnailIndex+1,c.mediaObjectId,c.groupType,D,w,I,R),d.emitNexusMetric(c)),U&&clearTimeout(U),U=setTimeout(function(){y(b);
h.usePeekHover||e.selectGivenThumbnail(a.$declarativeParent,z)},e.getHoveringDelayTimer())):"mouseleave"===a.type?U&&clearTimeout(U):"click"===a.type&&(y(b),e.selectGivenThumbnail(a.$declarativeParent,z),c=d.buildNexusMetric("ib.thumbnailClick",b.thumbnailIndex+1,c.mediaObjectId,c.groupType,D,w,I,R),(!e.useTabbedImmersiveView(h)&&"chromeless-video"===b.type||"tablet"==W)&&d.emitNexusMetric(c),e.useTabbedImmersiveView(h)&&(d.emitNexusMetric(c),d.postCountMetric("dpcc_videoThumbClicked_"+(b.thumbnailIndex+
1)+"_"+f),B.action="videoIngressClick",B.clickTimeStamp=a.$event.timeStamp,B.$event=a.$event,B.$currentTarget=a.$currentTarget,u.dispatch("videoIngressClick",B),d.postTimeMetric("dpcc_vse_videoingressclick",a.$event.timeStamp)))}}:N.update=function(a){var b=a.data;"ingress"===b.type||e.lazyLoadingRequired(b,n,h)||x();if("swatchHover"===a.type)b.color===n.getCurrentItem().color?y(n.getCurrentItem()):a.captured||e.lazyLoadingRequired(b,n,h)&&!e.lazyLoadOnHoverEnabled(h)&&y(n.getCurrentItem());else if("chromeful-video"===
b.type||"chromeless-video"===b.type){var c=e.getVideoHash(b.color,b.index,h);if("mouseenter"===a.type&&(d.postCountMetric("dpcc_videoThumbHovered_"+(b.thumbnailIndex+1)+"_"+f),"chromeless-video"===b.type)){var q=d.buildNexusMetric("ib.thumbnailHover",b.thumbnailIndex+1,c.mediaObjectId,c.groupType,D,w,I,R);d.emitNexusMetric(q)}y(b);h.usePeekHover&&"click"!==a.type||(e.selectGivenThumbnail(a.$declarativeParent,z),"click"===a.type&&(c=d.buildNexusMetric("ib.thumbnailClick",b.thumbnailIndex+1,c.mediaObjectId,
c.groupType,D,w,I,R),(!e.useTabbedImmersiveView(h)&&"chromeless-video"===b.type||"tablet"==W)&&d.emitNexusMetric(c),e.useTabbedImmersiveView(h)&&(d.emitNexusMetric(c),d.postCountMetric("dpcc_videoThumbClicked_"+(b.thumbnailIndex+1)+"_"+f),B.action="videoIngressClick",B.clickTimeStamp=a.$event.timeStamp,B.$event=a.$event,B.$currentTarget=a.$currentTarget,u.dispatch("videoIngressClick",B),d.postTimeMetric("dpcc_vse_videoingressclick",a.$event.timeStamp))))}};if(h.isDPXFeatureEnabled)g.on("triggerVideoAjax",
p);g.on("vsePlayer-imageblock_tablet",M)}});"use strict";v.when("A","jQuery","imageBlockUtils","ImageBlockLoader","postMetric","logFailedInteractionMetric","postEarlyMetric","imageBlockImmersiveViewUtils").register("ImageBlockImmersiveView",function(g,a,b,e,k,d,m,c){function p(a){return a.hiRes||a.large||a.main[a.main.length-1]}function l(){r.find("#ivTitle").click(function(){X.hide()})}function x(){O=Pa?{type:"360-spin"}:ca.getCurrentItem()}function H(){var a=r.find("#ivStage"),b=X.$container.find(".a-popover-wrapper"),
f=b.find(".a-popover-inner"),b=b.height()-c.getDimension(f,"padding-top")-c.getDimension(f,"padding-bottom");r.css("height",b);var f=r.find("#ivTitle").outerHeight(!0),d=r.find("#ivVariationSelection").outerHeight(!0),e=r.find("#ivMediaSelection").outerHeight(!0),h=r.find("#ivThumbs"),q=c.getDimension(h,"margin-top")+c.getDimension(h,"margin-bottom");h.css("height",b-f-d-e-q);r.find("#ivLargeImage").css("height",b);a.css("width",r.width()-c.getDimension(r,"padding-left")-c.getDimension(r,"padding-right")-
r.find("#ivThumbColumn").width()-c.getDimension(a,"margin-left")-c.getDimension(a,"margin-right"))}function Q(){r.find("#ivMediaSelect").change(function(){var b=a(this).val();"all"===b?(r.find("#ivVideoList").hide(),r.find("#ivThumbs").show(),r.find(".ivThumbVideo").show(),"chromeful-video"===O.type&&r.find("#ivVideo_"+O.index).click()):"images"===b?(r.find("#ivVideoList").hide(),r.find("#ivThumbs").show(),r.find(".ivThumbVideo").hide(),"chromeful-video"===O.type&&(0===fa&&0===ba?r.find("#iv360").click():
0===fa?r.find("#ivHeroImage_0").click():r.find("#ivImage_0").click())):"videos"===b&&(r.find("#ivVideoList").show(),r.find("#ivThumbs").hide(),"chromeful-video"!==O.type?r.find("#ivVideoList_0").click():r.find("#ivVideoList_"+O.index).click())})}function y(){var a=r.find("#ivStage").find("#ivLargeImage"),b=a.width(),f=a.height(),d=a.find(".fullscreen");d.removeAttr("style");var c=d.width(),e=d.height();0<d.length&&(d[0].naturalWidth&&(c=d[0].naturalWidth),d[0].naturalHeight&&(e=d[0].naturalHeight));
a.css("cursor","auto");var c=0===c?1:c,e=0===e?1:e,h=Math.min(b/c,f/e),q=e*h,g=c*h;1>h?(Qa?a.css("cursor","url('"+C.staticImages.zoomIn+"'), auto"):(a.css("cursor","-webkit-zoom-in"),a.css("cursor","-moz-zoom-in"),a.css("cursor","zoom-in")),za=!0):za=!1;c=Math.min(g,c);e=Math.min(q-20,e);d.css({"margin-top":(f-e)/2,"margin-left":(b-c)/2,height:e,width:c});a.css("visibility","visible");Aa=!1}function F(a){var b=r.find("#ivLargeImage");b.css("visibility","hidden");b.empty();c.animateStageIn(b);b.append(a);
y()}function L(){ga&&ga.pause();r.find("#ivLarge360").css("display","none");r.find("#ivLargeVideo").css("display","none");r.find("#ivLargeImage").css("display","none");z()}function P(f){L();r.find("#ivLargeImage").css("display","block");var d;"hero-image"===f?b.isDefined(ka)&&(d=p(ka[O.index])):b.isDefined(la)&&(d=p(la[O.index]));if(b.isDefined(d)){r.find(".fullscreen").remove();var e=a("\x3cimg\x3e").attr("src",d).addClass("fullscreen"),h=r.find("#ivLargeImage");c.animateStageOut(h,function(){e.load(function(){F(e)});
if(e[0].complete)F(e);else{h.empty();var b=(h.height()-104)/2,f=(h.width()-80)/2;a("\x3cimg\x3e").attr("src",C.staticImages.spinner).css({position:"relative",top:b+"px",left:f+"px"}).appendTo(h)}})}}function M(){var a=parseInt(O.index,10)+1;a>=ia.length||r.find("#ivVideo_"+a).click()}function N(){var a;b.isDefined(ia)&&(a=ia[O.index]);if(b.isDefined(a)){L();var f=r.find("#ivLargeVideo").css("display","block");ga?(ga.isDetached()&&ga.attach(f[0]),b.loadMediaIntoAiry(ga,a,wa,C.tabletWeb),ga.show()):
(ga=b.createAiryInstanceForChromeful(f,a,wa,"ImmersiveView"),wa.enableContinuousPlay&&ga.bind("ended",M));ga.play({isAsync:!0})}}function h(){x();var a;a="hero-image"===O.type?r.find("#ivHeroImage_"+O.index):"image"===O.type?r.find("#ivImage_"+O.index):"chromeful-video"===O.type||"chromeless-video"===O.type?r.find("#ivVideo_"+O.index):"360-spin"===O.type?r.find("#iv360"):b.isDefined(ka)?r.find("#ivHeroImage_"+O.index):r.find("#ivImage_"+O.index);b.isjQueryObjDefined(a)||(a=r.find("#ivImage_0"));n(a)}
function n(a){r.find(".ivThumb").removeClass("selected");a.addClass("selected");a.hasClass("ivThumbVideo")?(O.type="chromeful-video",O.index=a.attr("id").split("_")[1],N()):a.hasClass("ivHeroImage")?(O.type="hero-image",O.index=a.attr("id").split("_")[1],P(O.type)):a.hasClass("iv360Image")?(O.type="360-spin",O.index=0,u()):(O.type="image",O.index=a.attr("id").split("_")[1],P(O.type))}function u(){L();r.find("#ivLarge360").css("display","block");G();var a=r.find("#ivLarge360");a.css({opacity:0});setTimeout(function(){a.css({opacity:.4});
c.animateStageIn(a)},200);A();k.postCountMetric("dppc_click360");ta=Date.now()}function z(){0<ta&&(E("dppc_duration360",Date.now()-ta),ta=0)}function E(a,b){t.ue&&t.ue.count(a,b)}function A(){if(0<qa){var a=r.find(".iv360Hint");a.removeClass("iv360HintFaded");a.animate({opacity:1},200)}}function J(b,f){if(qa<b.length){var d=a("\x3cimg /\x3e").css({display:"block",width:6*na+"px",height:sa+"px"});d.hide();f.append(d);d.get(0).onload=function(){f.closest(document.documentElement).length&&(qa++,1===
qa&&(A(),0<ta&&E("dppc_loadTime360",Date.now()-ta)),0<Ga&&E("dppc_perSpriteloadTime360",Date.now()-Ga),r.find("#iv360Spinner").hide(),d.show(),xa=5*Z.imageLocations[Math.floor(ya/Z.imageLocations[0].length)][ya%Z.imageLocations[0].length],J(b,f))};d.attr("src",b[qa].replace(/(\._SP)\d+(,)\d+/,"$1"+ua+"$2"+va));Ga=Date.now()}}function K(a){if(b.isDefined(Z.spriteWidthSizes)&&0<Z.spriteWidthSizes.length){var f=Z.spriteWidthSizes,d=f.length,c=f[0],e=f[d-1];if(a<=c)return c;if(a>e)return e;for(c=0;c<
d;c++)if(a>f[c]&&a<=f[c+1])return f[c+1]}else return a}function G(){var b=r.find("#ivLarge360");b.children("#image-360-sprites").length||(b.append("\x3cdiv id\x3d'image-360-sprites'\x3e\x3c/div\x3e"),b.css({"margin-left":0,"margin-top":0,width:b.parent().width(),height:b.parent().height(),overflow:"hidden",position:"relative","-ms-user-select":"none","-webkit-user-select":"none","-mos-user-select":"none"}),a("\x3cimg\x3e").attr("src",C.staticImages.spinnerNoLabel).attr("id","iv360Spinner").css({position:"absolute",
top:"50%",left:"50%",transform:"translate(-50%, -50%)",display:"block"}).appendTo(b),Ha=!0,S())}function S(){if(b.isDefined(Z.spriteURLs)&&b.isDefined(r)&&Ha&&!Ia){var d=r.find("#ivLarge360"),c=a("\x3cdiv\x3e").addClass("iv360Hint").css({position:"absolute",width:"100%",bottom:0,opacity:0,display:"block"});b.isDefined(Z.staticImages.hint360)&&a("\x3cimg\x3e").css({"margin-left":"auto","margin-right":"auto",display:"block"}).attr("src",Z.staticImages.hint360).appendTo(c);a("\x3cdiv\x3e").css({"text-align":"center"}).text(C.staticStrings.dragToSpin).appendTo(c);
c.appendTo(d);var c=Z.imageWidth,e=Z.imageHeight,h=d.parent().width(),g=d.parent().height(),n=0,m=0;c/e>h/g?(ua=K(h),va=Math.round(e/c*ua),na=Math.ceil(h),sa=Math.ceil(va/ua*h),m=(g-sa)/2):(va=K(g),ua=Math.round(c/e*va),sa=Math.ceil(g),na=Math.ceil(ua/va*g),n=(h-na)/2);d.css({"margin-left":n,"margin-top":m,width:na+"px",height:sa+"px",overflow:"hidden",position:"relative"});d.children("#image-360-sprites").css("width",6*na+"px");J(Z.spriteURLs,r.find("#image-360-sprites"),0);c=r.find("#ivLarge360");
c.bind("mousedown",w);c.bind("touchstart",B);c.bind("touchmove",f);c.bind("touchend",q);a(document).bind("mousemove",D);a(document).bind("mouseup",I);b.isDefined(C.staticImages.grab)&&d.css("cursor","url('"+C.staticImages.grab+"'), auto");Ia=!0}}function B(a){Ba=!0;Ja=a.originalEvent.targetTouches[0].clientX}function f(a){Ba&&(R(a.originalEvent.targetTouches[0].clientX-Ja),Ja=a.originalEvent.targetTouches[0].clientX)}function q(a){Ba&&(Ba=!1)}function w(a){Ca=!0;Ka=a.originalEvent.clientX;b.isDefined(C.staticImages.grabbing)&&
(a=r.find("#ivLarge360"),a.css("cursor","url('"+C.staticImages.grabbing+"'), auto"),a.parents(".a-declarative").last().css("cursor","url('"+C.staticImages.grabbing+"'), auto"));return!1}function D(a){Ca&&(R(a.originalEvent.clientX-Ka),Ka=a.originalEvent.clientX)}function I(a){Ca&&(Ca=!1,b.isDefined(C.staticImages.grab)&&(a=r.find("#ivLarge360"),a.css("cursor","url('"+C.staticImages.grab+"'), auto"),a.parents(".a-declarative").last().css("cursor","auto")))}function R(a){for(a=xa-=a/na*180;0>a;)a+=
360;for(;360<a;)a-=360;xa=a;var f;a=360;for(var d=0;d<qa;d++)for(var c=0;c<Z.imageLocations[d].length;c++){var e=Math.abs(xa-5*Z.imageLocations[d][c]);e<a&&(a=e,f=d*Z.imageLocations[0].length+c)}f!==ya&&(a=Math.floor(f/Z.imageLocations[0].length),a!==Math.floor(ya/Z.imageLocations[0].length)&&(b.isDefined(La)||(La=document.createElement("canvas").getContext("2d")),d=r.find("#image-360-sprites").children(),La.drawImage(d[a],0,0)),a=r.find(".iv360Hint").not(".iv360HintFaded"),b.isDefined(a)&&(a.addClass("iv360HintFaded"),
a.animate({opacity:0},750)));ya=f;a=f%Z.imageLocations[0].length*-1*na;f=-1*Math.floor(f/Z.imageLocations[0].length)*sa;d=r.find("#ivLarge360").children("#image-360-sprites");d.css("-webkit-transform","translate3d("+a+"px, "+f+"px, 0)");d.css("transform","translate3d("+a+"px, "+f+"px, 0)")}function W(){r.delegate(".ivThumb","click",function(){var b=a(this);n(b)});r.delegate(".ivThumbVideoListOuter","click",function(){r.find(".ivThumbVideoListOuter").removeClass("selected");var b=a(this);b.addClass("selected");
O.type="chromeful-video";O.index=b.attr("id").split("_")[1];N()})}function U(){ga&&!ga.isDetached()&&(wa.volume=ga.getVolume(),ga.detach(),!document.all||t.atob||document.addEventListener||(ga=null));r.find("#ivLargeImage").empty();z()}function T(a,b){return 0<b?b/2:Math.min(0,Math.max(b,a))}function aa(b){var f=ra.left-(b.pageX-Da[0])*Ea;g.capabilities.rtl&&(f=ra.left-(a(t).width()-b.pageX-Da[0])*Ea);b=ra.top-(b.pageY-Da[1])*Ea;f=T(f,Fa.left);b=T(b,Fa.top);r.find(".fullscreen").css({left:f,top:b})}
function ha(){r.delegate("#ivLargeImage","click",function(a){if(Aa)y();else if(za){r.find(".fullscreen").removeAttr("style");if(za){var b=r.find("#ivLargeImage"),f=b.find(".fullscreen");Qa?b.css("cursor","url('"+C.staticImages.zoomOut+"'), auto"):(b.css("cursor","-webkit-zoom-out"),b.css("cursor","-moz-zoom-out"),b.css("cursor","zoom-out"));Aa=!0;var d=r.find("#ivLargeImage");Fa.left=d.width()-f.width();Fa.top=d.height()-f.height();var d=b.height()/2,c=b.width()/2;Da=[b.offset().left+c,b.offset().top+
d];ra.top=d-f.height()/2;ra.left=c-f.width()/2;f.css({position:"relative",left:ra.left,top:ra.top});Ea=Math.max(f.height()/b.height(),f.width()/b.width())}aa(a)}});r.delegate("#ivLargeImage","mousemove",function(a){Aa&&aa(a)})}function V(f){if(b.isImmersiveViewEnabled(C,ca.getCurrentItem().color))if(Ma){var e=f.$event.originalEvent;e.acknowledge&&e.acknowledge(f.$currentTarget[0]);Pa=b.isDefined(f)&&"button-360-click"===f.action;d.isEnabled&&m.logImmersiveViewRequestServed(d);k.postCountMetric("dppc_immersiveViewOpened");
if(b.isDefined(X))X.show();else{f=a("#auiImmersiveViewDiv");var e=a(t).height()-150,h=a(t).width()-75;X=Ma.create(f,{name:"immersiveView",activate:"onclick",width:h,height:e,popoverLabel:"ImmersiveView",hideHeader:!0});f.click()}if(Na){r=a("#ivMain");f=ca.getCurrentItem().color;la=C.colorImages[f];ka=C.heroImage[f];ia=C.useChildVideos?C.colorToVideo[f]:C.videos;Oa=Y()&&C.spin360ColorEnabled[f];Z=Y()?C.spin360ColorData[f]:ea;x();ma=ba=pa=fa=0;b.isDefined(ka)&&(ba=ka.length);b.isDefined(la)&&(fa=la.length);
b.isDefined(ia)&&(pa=ia.length);Oa&&(ma=1);c.populateTitle(r.find("#ivTitle"),45,C);c.populateVariationSelection(r.find("#ivVariationSelection"));f=r.find("#ivMediaSelect");0===fa+ma||0===pa?(f.parent().hide(),r.find("#ivThumbs").addClass("noMediaSelection")):(f.empty(),a("\x3coption/\x3e").attr("value","all").prop("selected",!0).text(C.staticStrings.allMedia+" ("+(ba+fa+ma+pa)+")").appendTo(f),a("\x3coption/\x3e").attr("value","images").text(C.staticStrings.images+" ("+(ba+fa+ma)+")").appendTo(f),
a("\x3coption/\x3e").attr("value","videos").text(C.staticStrings.videos+" ("+pa+")").appendTo(f),f.parent().show(),f.val("all"));f=r.find("#ivThumbs");f.find(".ivRow").not(".placeholder").remove();for(var e=ba+fa+pa+ma,q=h=0;h<e;)for(var n=f.find(".ivRow.placeholder").clone().removeClass("placeholder").appendTo(f),w=0;3>w&&h<e;w++,h++,q++)if(q<ba){var l=ka[h].thumb,p=f.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("ivHeroImage").attr("id","ivHeroImage_"+h).appendTo(n);p.find(".ivThumbImage").css("background",
'url("'+c.getResizedThumbnailURL(l)+'") center no-repeat')}else if(q>=ba&&q<fa+ba)l=la[h-ba].thumb,p=f.find(".ivThumb.placeholder").clone().removeClass("placeholder").attr("id","ivImage_"+(h-ba)).appendTo(n),p.find(".ivThumbImage").css("background",'url("'+c.getResizedThumbnailURL(l)+'") center no-repeat');else if(q>=ba+fa&&q<fa+ba+ma)p=f.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("iv360Image").attr("id","iv360").appendTo(n),p.find(".ivThumbImage").css("background",'url("'+
(b.isDefined(C.staticImages.icon360)?c.getResizedThumbnailURL(C.staticImages.icon360,!0):"")+'") center no-repeat');else if(l=ia[h-fa-ba-ma],p=f.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("ivThumbVideo").attr("id","ivVideo_"+(h-fa-ba-ma)).appendTo(n),p.find(".ivThumbImage").css("background",'url("'+l.thumbUrl+'") center no-repeat'),b.isDefined(l)){var u={position:"triggerTop"},z=r.find("#ivThumbs").find(".ivThumbVideoPopover.placeholder").clone().removeClass("placeholder");
z.find(".ivVideoPopoverTitle").text(l.title);z.find(".ivVideoPopoverDuration").text(l.durationTimestamp);u.inlineContent=z[0];g.declarative.create(p,"a-tooltip",u)}f=r.find("#ivVideoList");f.find(".ivThumbVideoListOuter").not(".placeholder").remove();e=f.find(".placeholder");for(h=0;h<pa;h++)q=ia[h],n=e.clone().removeClass("placeholder").appendTo(f),n.attr("id","ivVideoList_"+h),n.find(".ivThumbImage").css("background",'url("'+q.thumbUrl+'") center no-repeat'),n.find(".ivThumbTitle").text(q.title),
n.find(".ivThumbDuration").text(q.durationTimestamp);r.find("#ivLarge360").empty();qa=0;Ia=Ha=!1;wa=C.airyConfig;Na=!1;Ra()}}else t.performance&&performance.now&&t.ue&&ue.count&&ue.count("DPIBClickFailedInteractionCount",(ue.count("DPIBClickFailedInteractionCount")||0)+1);else k.postCountMetric("immersiveViewNotExistsClickCount")}function oa(a){var f=C.colorToAsin[a],d={},c=500;if(f&&f.asin){d.params={asin:f.asin};var h="360"+f.asin,q=Date.now();d.success=function(f){E("dppc_asyncRequestTime360",
Date.now()-q);f&&b.isDefined(f.spin360.spin360Model)?(b.ajaxState(h,"success"),C.spin360ColorData[a]=f.spin360.spin360Model,a===ca.getCurrentItem().color&&(Z=C.spin360ColorData[a],S())):d.error()};d.error=function(){k.postCountMetric("dppc_asyncFailed360");E("dppc_asyncRequestTime360",Date.now()-q);c*=2;16E3>=c?setTimeout(function(){q=Date.now();e.load("/gp/product/features/apparel-main-image/360.html",d)},c):b.ajaxState(h,"fail")};b.ajaxState(h)&&"fail"!==b.ajaxState(h)||(e.load("/gp/product/features/apparel-main-image/360.html",
d),b.ajaxState(h,"sent"))}}function Y(){return b.isDefined(C.spin360ConfigEnabled)&&C.spin360ConfigEnabled}var da,C,ca,ja,X,r,ka,la,ia,ba,fa,pa,ma,O,ga,wa,Z,Oa,na,sa,va,ua,Ka,Ja,Pa=!1,Ha=!1,Ia=!1,xa=0,ya=0,ta=0,Ga=0,Ca=!1,Ba=!1,qa=0,La,Qa=navigator.userAgent.match(/msie|trident/i),Na=!0,Aa=!1,za=!1,Fa={},ra={},Ea,Da,Ma;v.when("a-modal").execute(function(a){Ma=a});var Ra=g.once(function(){Q();W();ha();g.on("a:popover:afterUpdatePosition:immersiveView",H);g.on("a:popover:afterShow:immersiveView",h);
g.on("a:popover:afterHide:immersiveView",U);l()});return function(f,e,h,q){da=this;C=f;ca=e;d.refToModel=ca;ja=q;Y()&&(C.spin360ColorData[C.landingAsinColor]=C.spin360ColorData[C.defaultColor],C.spin360ColorEnabled[C.landingAsinColor]=C.spin360ColorEnabled[C.defaultColor]);b.isDefined(C.staticImages.icon360)&&a("#imageBlock #altImages ul").find(".360IngressTemplate").find("img").attr("src",c.addStyleCodeToURL(C.staticImages.icon360,"_FMpng_RI_"));da.render=function(a,f,d,c,e,h){Na=!0;Y()&&C.spin360ColorEnabled[a]&&
!b.isDefined(C.spin360ColorData[a])&&(C.spin360ColorData[a]={},oa(a));b.isImmersiveViewEnabled(C,ca.getCurrentItem().color)&&Y()&&C.spin360ColorEnabled[a]&&(f===C.maxAlts&&(a=c.find(".item.imageThumbnail"),d=c.find(".item.videoThumbnail"),b.isDefined(d)&&1<d.length?d.last().remove():a.last().remove(),f--),a=c.find(".360IngressTemplate").clone().removeClass("360IngressTemplate").removeClass("aok-hidden").addClass("item"),g.declarative.create(a,"button-360-click"),c.append(a),f++,k.postCountMetric("dppc_display360"));
return f};da.update=function(a){};b.isImmersiveViewEnabled(C,ca.getCurrentItem().color)||b.addTag("immersiveViewNotAvailable");ja.register("imageClick",V);ja.register("button360Click",V)}});"use strict";v.when("A","jQuery","imageBlockUtils","postMetric","logFailedInteractionMetric","postEarlyMetric","imageBlockImmersiveViewUtils").register("ImageBlockTabbedImmersiveView",function(g,a,b,e,k,d,m){function c(){var b=Q.getImmersiveViewModalInstance().$container.find(".a-popover-wrapper"),d=b.find(".a-popover-inner"),
b=b.height()-m.getDimension(d,"padding-top")-m.getDimension(d,"padding-bottom");a("#iv-tab-view-container").css("height",b);L=a("#iv-tab-view-container ul.iv-tab-views li").filter(function(){return"none"!==a(this).css("display")}).length;1<L?(a("#iv-tab-view-container ul.iv-tab-views li").parent().show(),d=a("#iv-tab-view-container ul.iv-tab-views li").parent().height(),b-=d):a("#iv-tab-view-container ul.iv-tab-views li").parent().hide();a("#iv-tab-view-container .iv-tab-content").css("height",b);
g.trigger("dp:image-block:immersive-view:resize")}function p(){g.trigger("dp:image-block:immersive-view:reset")}function l(c){if(b.isImmersiveViewEnabled(H,Q.getCurrentItem().color))if(M){var h=c.$event.originalEvent;h.acknowledge&&h.acknowledge(c.$currentTarget[0]);k.isEnabled&&d.logImmersiveViewRequestServed(k);e.postCountMetric("dppc_immersiveViewOpened");b.isDefined(c)&&("button-360-click"===c.action?a("#iv360TabHeading").click():"videoIngressClick"===c.action?(P=c.clickTimeStamp,a("#ivVideosTabHeading").click()):
"showroomIngressClick"===c.action?(P=c.clickTimeStamp,a("#ivShowroomTabHeading").click()):a("#ivImagesTabHeading").click());h=Q.getImmersiveViewModalInstance();if(b.isDefined(h))h.show();else{c=a("#auiImmersiveViewDiv");var h=Math.min(Math.max(a(t).height()-150,540),1080),m=Math.min(Math.max(a(t).width()-75,990),1980),h=M.create(c,{name:"immersiveView",activate:"onclick",width:m,height:h,popoverLabel:"ImmersiveView",hideHeader:!0});Q.setImmersiveViewModalInstance(h);c.click()}F&&(F=!1,N(),g.trigger("dp:image-block:immersive-view:init"))}else t.performance&&
performance.now&&t.ue&&ue.count&&ue.count("DPIBClickFailedInteractionCount",(ue.count("DPIBClickFailedInteractionCount")||0)+1);else e.postCountMetric("immersiveViewNotExistsClickCount")}var x,H,Q,y,F=!0,L=0,P,M;v.when("a-modal").execute(function(a){M=a});var N=g.once(function(){g.on("a:popover:afterUpdatePosition:immersiveView",c);g.on("a:popover:afterShow:immersiveView",c);g.on("a:popover:afterHide:immersiveView",p)}),h=g.once(function(){var b=a("#iv-tab-view-container ul.iv-tab-views li");b.bind("click",
function(d){var c=b.filter(".iv-active");c.attr("id")!==a(this).attr("id")&&g.trigger("dp:ivTabs:"+c.find("a").attr("data-iv-tab-view")+":deselect",d);b.removeClass("iv-active");a(this).addClass("iv-active");a("#iv-tab-view-container .iv-tab-content").hide();c=a(this).find("a").attr("data-iv-tab-view");a("#"+c).show();"ivVideosTab"===c&&(d.clickTimeStamp=P||d.timeStamp);g.trigger("dp:ivTabs:"+c+":select",d);e.postCountMetric("dppc_"+c);return!1})});return function(a,d,c,g){x=this;H=a;Q=d;k.refToModel=
Q;y=g;x.render=function(a,b,d,c,h,g){e.postCountMetric("dpcc_altThumbs_"+b);F=!0};x.update=function(a){};x.getTitle=function(){};x.getVariationSelectionInfo=function(){};h();b.isImmersiveViewEnabled(H,Q.getCurrentItem().color)||b.addTag("immersiveViewNotAvailable");y.register("imageClick",l);y.register("button360Click",l);b.useTabbedImmersiveView(H)&&(y.register("videoIngressClick",l),y.register("showroomIngressClick",l))}});"use strict";v.when("A").register("ImageBlockLoader",function(g){return{load:function(a,
b){b=b||{};b.timeout=b.timeout||4E3;g.ajax(a,b)}}});"use strict";v.when("A","jQuery","Airy","postMetric","ImageBlockATF","ImageBlockBTF","logFailedInteractionMetric","postEarlyMetric","ShoppableSceneWeblabProvider").register("imageBlockUtils",function(g,a,b,e,k,d,m,c,p){function l(a){return null!==a&&"undefined"!==typeof a}function x(b){var d=0;a.each(b,function(a,b){var f=parseInt(b[1],10);f>d&&(d=f)});return d}function H(b){var d=0;a.each(b,function(a,b){var f=parseInt(b[0],10);f>d&&(d=f)});return d}
function v(a,b,d){b=b.width();if(d.naturalMainImageSize)return b;a=x(a);0<a&&(b=Math.min(b,a));return b}function y(a,b,d){b=b.height();if(d.naturalMainImageSize)return b;a=H(a);0<a&&(b=Math.min(b,a));return b}function F(b){var d;a.each(b,function(a,b){l(d)||(d=b[1]/b[0])});return d||1}function L(f,d,c,h,g,n,m,k,l,p,u,z,E){var A=a.extend({},c.foresterMetadataParams);null!==h&&(A.method+="."+h);var H=[];d.disabledViewIds&&(H=d.disabledViewIds);return b.embed({parentElement:f[0],streamingUrls:d.url,
contentId:d.mediaObjectId,contentMinAge:Number(d.minimumAge||"")||0,contentTitle:d.title,swfUrl:c.swfUrl,foresterMetadataParams:A,backgroundColor:"black",flashParams:{wmode:"transparent"},slateImages:{preloadSlate:d.slateUrl,postMediaSlate:d.slateUrl},videoAds:c.videoAds,bindings:{play:function(){if("ImmersiveView"===h)J||(J=!0,e.postCountMetric("dppc_chromefulVideoPlayedIV"));else if(K||(K=!0,e.postCountMetric("dppc_chromefulVideoPlayedPV")),!p){var a=e.buildNexusMetric("ib.thumbnailClick",l,d.mediaObjectId,
d.groupType,u,z,E);e.emitNexusMetric(a)}}},cuePoints:[{values:d.durationSeconds-1,type:"position",callback:function(a,b,f){g&&(P(0,n,k),M(m))}}],disabledViewIds:H})}function P(a,b,d){b.fadeTo(500,0,function(){N(a,d);b.fadeTo(500,1)})}function M(a){a&&a.toggle()}function N(b,d){var c=d.find("img");l(c[b])&&a(c[b]).click()}function h(a,b){B[a]=b?b:B[a];return B[a]}function n(b,d,c){c=c||S;c=c.colorImages;if(1>c.length||!l(c[b])||!l(d))return-1;var h=-1;a.each(c[b],function(a,b){b.variant===d&&(h=a)});
return h}function u(b,d,c){c=c||S;c=c.colorImages;return!(l(c)&&l(c[b])&&l(c[b][d])&&l(c[b][d].main))||1>a.map(c[b][d].main,function(a,b){return b}).length?-1:c[b][d]}function z(a,b,d,c){c.parent().css("z-index",2);0!==d&&0!==b&&(b/=d,a>b?c.css("width",b/a*100+"%"):c.css("height",a/b*100+"%"))}function E(b,d){var h;if(h=b.useIV)h=b.colorImages&&b.colorImages[d]&&0<b.colorImages[d].length?!0:!1;m.isEnabled&&(m.IVApplicaple=h,c.logImmersiveViewApplicability(a,m));return h}function A(){return 0<a(".gridImageBlockViewLayout").length}
var J,K,G,S=a.extend(!0,{},k,d),B={};return{isDefined:l,isDefinedAndEmpty:function(a){return l(a)&&"object"===typeof a&&0===Object.keys(a).length},isUndefinedOrEmpty:function(a){return l(a)?"object"===typeof a&&0===Object.keys(a).length:!0},isDefinedAndNotEmpty:function(a){return l(a)?"object"===typeof a&&0<Object.keys(a).length:!1},isjQueryObjDefined:function(a){return 0!==a.length},getAspectRatio:F,getMaxHeightOfMainImage:y,getMaxWidthOfMainImage:v,getMaxDimensionsOfMainImage:function(a,b,d){if(d.acEnabled)return[b.height(),
b.width()];var c=y(a,b,d);b=v(a,b,d);a=F(a);d=b/a;b=Math.min(b,c*a);c=Math.min(c,d);return[c,b]},getContainerHeight:function(a,b,d){var c=a.get(0);a=0;if(l(c)){a=c.offsetWidth/b;a=Math.min(a,d);var h;b=S.mainImageHeightPartitions;d=S.mainImageMaxSizes;if(l(d)&&l(b)){for(var e=0,g=t.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,c=0;c<b.length;c++)g>b[c]&&(e=c+1);d.length>=e&&(h=d[e])}l(h)&&(a=Math.min(h[1],a))}return a},getColorFromState:function(b,d){if(b){d=d||S;
var c="";a.each(d.visualDimensions,function(a,d){b[d]&&(c+=" "+b[d])});return c&&c.substring(1)}},createThumbnail:function(a,b,d,c){var h=d.find(".template").clone().removeClass("template").addClass("item"),e=document.createElement("img");e.src=b;h.find(".placeHolder").replaceWith(e);(b=a.heroVideoVariant)&&"hero-image"===a.type&&a.variant===b&&h.addClass("heroImageThumbnail");l(c)&&h.addClass(c);A()&&h&&(c=document.createElement("div"),c.className="imageBlockThumbnailImageGrayOverlay",e.parentNode.insertBefore(c,
e));g.declarative.create(h,"thumb-action",a);h.attr&&h.attr("data-ux-click","");d.append(h)},selectGivenThumbnail:function(a,b){var d=a.find(".a-button");b.find(".a-button").removeClass("a-button-selected").removeClass("a-button-focus");d.addClass("a-button-selected").addClass("a-button-focus")},createAiryInstanceForChromeful:function(a,b,d,c,h,e,g,n){L(a,b,d,c,h,e,g,n,0,1,"","","")},createAiryInstanceForChromefulNotUseTabbedImmersiveView:L,loadMediaIntoAiry:function(a,b,d,c){a&&a.getMediaSourceInfo()!==
b.url&&(c?a.loadMedia?(G={mediaSourceInfo:[b.url],contentId:b.mediaObjectId,refTag:"vse_ib_tablet_web"},a.loadMedia(G)):a.play({videoUrl:b.url,mimeType:"video/mp4",contentId:b.mediaObjectId,refTag:"vse_ib_tablet_web"}):a.loadMedia?a.loadMedia({mediaSourceInfo:b.url,contentId:b.mediaObjectId,contentMinAge:Number(b.minimumAge||"")||0,contentTitle:b.title,slateImages:{preloadSlate:b.slateUrl,postMediaSlate:b.slateUrl}}):a.play({videoUrl:b.url,mimeType:"video/mp4",contentId:b.mediaObjectId}))},showUnavailable:function(b){b&&
(a("#imageBlock .unvailableVariation").html(b),a("#imageBlock .variationUnavailable").show())},hideUnavailable:function(){a("#imageBlock .variationUnavailable").hide()},fadeToThumbnail:P,toggleVideoCaption:M,selectThumbnail:N,spinner:function(b,d){var c=a("#imageBlock .a-spinner").parent();0===c.length&&(c=a("\x3cdiv\x3e\x3c/div\x3e").append(a("\x3cspan\x3e\x3c/span\x3e").addClass("a-spinner").addClass("a-spinner-medium")),b.append(c),c.css({position:"absolute",left:"50%",top:"50%",transform:"translate3d(-50%, -50%, 0)",
"-webkit-transform":"translate3d(-50%, -50%, 0)","z-index":"3",width:"48px",height:"48px",border:"8px solid #FFFFFF","-webkit-border-radius":"20px","-moz-border-radius":"20px","border-radius":"100%"}));d?c.show():c.hide();return c},rankedImagesReadyEvent:function(a){return"ranked-images-ready-for-"+a},ajaxState:h,getIndexForVariant:n,getImageHash:u,lazyLoadingRequired:function(a,b,d){b=Math.max(n(a.color,b.getCurrentItem().variant,d),0);b=-1!==u(a.color,b,d);a=d.colorToAsin[a.color]&&d.colorToAsin[a.color].asin;
a=!a||"success"!==h(a);return!d.lazyLoadExperienceDisabled&&!b&&a},lazyLoadOnHoverEnabled:function(a){return!a.lazyLoadExperienceOnHoverDisabled},updateAspectRatio:z,repositionVideoBanner:function(a,b,d,c){setTimeout(function(){var d=a.width()/a.height();z(d,16,9,b)},c||0)},getVideosCount:function(a,b){return b.useChildVideos&&b.colorToVideo[a]?b.colorToVideo[a].length:b.videos?b.videos.length:0},getVideoHash:function(a,b,d){if(d.useChildVideos){if(!l(d.colorToVideo))return-1;a=d.colorToVideo[a]}else a=
d.videos;return l(a)&&l(a[b])&&l(a[b].url)?a[b]:-1},isImmersiveViewEnabled:E,playVideoInImmersiveView:function(a,b){return E(a,b)&&a.useTabbedImmersiveView},useTabbedImmersiveView:function(a){return a.useTabbedImmersiveView},getMediaSourceInfo:function(){return l(G)?G.mediaSourceInfo[0]:""},getNilgiriServiceAjaxRequest:function(a,b,d){return{requester:"DetailPageTablet",marketplaceID:d.marketPlaceID,clientPrefix:"ImageBlock_tablet",locale:d.languageCode,page:"DetailPageTablet",placement:"ImageBlock",
video:{videoURL:d.url,imageURL:d.slateUrl}}},addTag:function(a){t.ue&&t.ue.tag&&t.ue.tag(a)},isShoppableScenesEnabled:function(){return p.isEnabled&&0<a(".mirai-scene-image-block-template").length},isImageBlockGridViewEnabled:A,getHoveringDelayTimer:function(){return 50}}});"use strict";v.when("A","jQuery","imageBlockUtils","ImageBlockHeroUtils").register("ImageBlockHeroImageView",function(g,a,b,e){function k(d,c,g,k){if(!b.isjQueryObjDefined(d.find(".a-button-selected"))){var l=F.getCurrentItem();
if(!k||"chromeless-video"!==l.type||!y.autoplayVideo){k=0;if("hero-image"===l.type){k=m(l.color,l.variant);if(-1===k)return;k=-1!==k?k:0}var p=c+k;p>=g&&(k=0,p=c);c=e.getHeroImageHash(y,l.color,k);-1!==c&&(v.dispatch("updateModel",{data:{index:k,thumbnailIndex:p,variant:c.variant,type:"hero-image"}}),c=d.find(".item").get(p),b.selectGivenThumbnail(a(c),d))}}}function d(d,c,e){if("hero-video"===F.getCurrentItem().type)return d;c=y.heroImage&&y.heroImage[c];var g=d;b.isDefined(c)&&(a.each(c,function(a,
c){d<y.maxAlts&&(b.createThumbnail({type:"hero-image",index:a,thumbnailIndex:d,variant:c.variant},c.thumb,P,"imageThumbnail"),d++)}),k(P,g,d,e));return d}function m(d,c){var e=y.heroImage;if(1>e.length||!b.isDefined(e[d])||!b.isDefined(c))return-1;var g=-1;a.each(e[d],function(a,b){b.variant===c&&(g=a)});return g}function c(){if(M.length&&y.repositionHeroImage){var a=e.getHeroDimParams(y,F.getCurrentItem()),d;b.isDefined(a)&&(d=b.isDefined(a.xPos)?a.xPos+"px "+a.yPos+"px ":"center "+a.yPos+"px ",
M.css({"background-position":d,"background-size":a.width+"px "+a.height+"px ","max-width":a.width+"px ","min-height":a.height+"px ",filter:"","-ms-filter":""}))}}function p(a,d,c,g){if(M.length&&a&&d){if("function"===typeof c||g){var m=new Image;m.onload=g?function(){M.css("background-image",'url("'+a+'")')}:c;m.src=a}c=d[1];var m=d[0],k;g||M.css({"background-image":'url("'+a+'")'});y.repositionHeroImage&&(d=e.getHeroDimParams(y,F.getCurrentItem(),d),b.isDefined(d)&&(c=d.width,m=d.height,k=b.isDefined(d.xPos)?
d.xPos+"px "+d.yPos+"px ":"center "+d.yPos+"px "));M.css({"background-position":k,"background-size":c+"px "+m+"px ","max-width":c+"px ","min-height":m+"px ",filter:"","-ms-filter":""})}}function l(b,d,c,g){b=e.getHeroImageHash(y,b,d);if(-1===b)return-1;d=a.map(b.main,function(a,b){return b})[0];p(d,b.main[d],c,g)}function x(a,b,d){if("hero-image"!==a.type)return-1;var c=m(a.color,F.getCurrentItem().variant),c=-1!==c?c:0;if(-1===e.getHeroImageHash(y,a.color,c))return-1;var g=F.getCurrentItem();a.thumbnailIndex=
g.thumbnailIndex;a.type=g.type;a.variant=g.variant;a.index=c;H(a,b,d)}function H(a,b,d){var c=e.getHeroImageHash(y,a.color,a.index),m;m=a&&N&&g.equals(a,N)?!0:!1;N||(N=a);if(!m&&a||b)l(a.color,a.index,b,d),N=a;M.removeClass("hide-background");g.trigger("dp:image-block:update",c)}var t,y,F,v,P,M,N={};return function(e,g,m,k){t=this;y=e;F=g;v=k;y.heroImage[y.landingAsinColor]=y.heroImage[y.defaultColor];t.render=function(b,c,e,h,g,m,k){P=h;M=a("#heroImage");b=d(c,b,m);x(F.getCurrentItem(),k,m);return b};
t.update=function(a){var d=a.data;"ingress"!==d.type&&M.addClass("hide-background");"swatchHover"===a.type?a.captured||(d.type=F.getCurrentItem().type,-1!==x(d)&&(a.captured=!0)):"hero-image"===d.type&&(H(d),"click"!==a.type&&y.usePeekHover||b.selectGivenThumbnail(a.$declarativeParent,P))};v.register("resize",c)}});"use strict";v.when("A","jQuery","imageBlockUtils").register("ImageBlockAltImageIngressView",function(g,a,b){var e,k,d,m;return function(a,p,l,x){e=this;k=a;d=x;e.render=function(a,d,c,
l,p,x,t){m=l;e=this;c=k.maxAlts;l=d;p=k.colorImages[a]?k.colorImages[a].length:0;p+=b.getVideosCount(a,k);a=k.heroImage[a];x=0;a&&(x=a.length);a=p+x;a>c&&(c=a-c,a=m.find(".altIngressTemplate").clone().removeClass("altIngressTemplate").removeClass("aok-hidden").addClass("item"),c+="+",l={type:"ingress",index:0,thumbnailIndex:d,variant:""},a.find("#altIngressText").append(c),g.declarative.create(a,"thumb-action",l),m.append(a),l=d++);return l};e.update=function(a){"ingress"===a.data.type&&"click"===
a.type&&d.dispatch("imageClick",a)}}});"use strict";v.when("imageBlockUtils").register("ImageBlockState",function(g){return function(a,b,e){this.getImageHash=function(b){var d=e.getCurrentItem();b=g.getIndexForVariant(d.color,b||"MAIN",a);return g.getImageHash(d.color,b,a)};this.onImageUpdateForTwister=function(a){b.register("updateSelection",function(b){"swatchClick"===b.type&&"function"===typeof a&&a()})}}});"use strict";v.when("jQuery","imageBlockUtils").register("ImageBlockHeroUtils",function(g,
a){function b(a,b){var c;if(b.repositionHeroImage){c=a[1];var e=a[0];if(768>=(t.innerHeight||document.documentElement.clientHeight||document.body.clientHeight))c*=.7,e*=.7;else{var g=((t.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)-1024)/256,g=Math.max(Math.min(g,1),0);c*=.7+.3*g;e*=.7+.3*g}c=[c,e]}return c}function e(b,e,c){var g;if(c.repositionHeroImage){var k=t.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;c=c.heroFocalPoint;if(a.isDefined(c)){g=
Math.max((k-Math.min(1500,b))/2,0);var x=Math.max((k-b)/2,0);g-=x;k=Math.max(Math.min(k,1500),1024);g=g+(k-420-23)/2-b/e[1]*c}}return g}function k(b,e,c){b=b.heroImage;return!(a.isDefined(b)&&a.isDefined(b[e])&&a.isDefined(b[e][c])&&a.isDefined(b[e][c].main))||1>g.map(b[e][c].main,function(a,b){return b}).length?-1:b[e][c]}return{getHeroImageHash:k,getHeroDimParams:function(d,m,c){if(d.repositionHeroImage){if(!a.isDefined(c)){c=k(d,m.color,m.index);if(-1===c)return;m=g.map(c.main,function(a,b){return b})[0];
c=c.main[m]}m=b(c,d);d=e(m[0],c,d);return{height:m[1],width:m[0],xPos:d,yPos:75}}}}});"use strict";v.when("postMetric").register("ImageBlockImmersiveViewShowroom",function(g){function a(){this.render=function(){};this.update=function(){}}return function(b,e,k,d){var m=!1,c=new a;v.now("showroom-image-block-view").execute("showroom-image-block-view-decider",function(a){a!==ea&&(m=!0,c=new a(b,e,k,d))});b&&!0===b.showroomEnabled&&!1===m&&g.postCountMetric("showroom:atf:imageBlock:hiddenDueToAssetsNotPresentInTime");
return c}});"use strict";v.when("A","jQuery","imageBlockUtils").register("imageBlockImmersiveViewUtils",function(g,a,b){function e(a,e){var c=g.copy(a);if(b.isDefined(a)&&a.length>e){try{for(var k=-1,l=0;l<a.length;l++){var x=a.charAt(l);if(" "===x||"."===x||"?"===x||";"===x||","===x||":"===x)k=l;if(l===e-4){c=a.substring(0,-1===k?l:k);break}}}catch(t){c=a.substring(0,e-3)}c+="..."}return c}function k(a,b){var c=a.lastIndexOf(".");return a="_"===a.charAt(c-1)?a.substring(0,c-1)+b+a.substring(c):a.substring(0,
c)+"."+b+a.substring(c)}return{getDimension:function(a,b){var c=parseInt(a.css(b),10);return isNaN(c)?0:c},attachTabSelectHandler:function(a,b){g.on("dp:ivTabs:"+a+":select",b)},attachTabDeselectHandler:function(a,b){g.on("dp:ivTabs:"+a+":deselect",b)},attachImmersiveViewResizeHandler:function(a){g.on("dp:image-block:immersive-view:resize",a)},detachImmersiveViewResizeHandler:function(a){g.off("dp:image-block:immersive-view:resize",a)},attachImmersiveViewResetHandler:function(a){g.on("a:popover:afterHide:immersiveView",
a)},hideTabHeading:function(b){a("#"+b).hide()},unhideTabHeading:function(b){a("#"+b).show()},addStyleCodeToURL:k,getResizedThumbnailURL:function(a,b){a=a.replace(/\._(AA|SS)\d+_/,"").replace(/\._SX\d+_SY\d+_CR,0,0,\d+,\d+_/,"");a=a.replace(/\._(US)\d+_/,"").replace(/\._SR\d+,\d+_/,"").replace(/\._SP[0-9,C]+_/,"");a=a.replace(/\._CB\d+_SS\d+_/,"");var c="_AA50_";b&&(c+="FMpng_RI_");return k(a,c)},populateVariationSelection:function(d){if(b.isDefined(t.DetailPage)&&b.isDefined(t.DetailPage.StateController)){d.empty();
var e=t.DetailPage.StateController.getState(),c=e.variation_label_order,g;for(g in c)if(c.hasOwnProperty(g)){var k=c[g],x=e.selected_variations[k],k=e.variation_display_labels[k];x&&a("\x3cdiv/\x3e").addClass("ivVariations").text(k+":"+x).appendTo(d)}}},populateTitle:function(a,b,c){a.html(c.title);a.attr("title",a.text());a.html(e(c.title,b))},animateStageIn:function(a){a.animate({opacity:1},200)},animateStageOut:function(a,b){a.animate({opacity:.4},100,b)},logError:function(a,b,c,e){t.ueLogError&&
t.ueLogError(e,{logLevel:a,attribution:b,message:c})}}});"use strict";v.when("A","jQuery","imageBlockUtils","postMetric","imageBlockImmersiveViewUtils").register("ImageBlockImmersiveViewImages",function(g,a,b,e,k){function d(){k.populateTitle(u.find("#ivTitle"),160,h)}function m(){var a=n.getCurrentItem().color;E=h.colorImages[a];z=h.heroImage[a];A=J=0;b.isDefined(z)&&(A=z.length);b.isDefined(E)&&(J=E.length)}function c(a){return a.hiRes||a.large||a.main[a.main.length-1]}function p(){var a=u.find("#ivStage").find("#ivLargeImage"),
b=a.width(),d=a.height(),c=a.find(".fullscreen");c.removeAttr("style");var e=c.width(),g=c.height();0<c.length&&(c[0].naturalWidth&&(e=c[0].naturalWidth),c[0].naturalHeight&&(g=c[0].naturalHeight));a.css("cursor","auto");var e=0===e?1:e,g=0===g?1:g,k=Math.min(b/e,d/g),m=g*k,l=e*k;1>k?(G?a.css("cursor","url('"+h.staticImages.zoomIn+"'), auto"):(a.css("cursor","-webkit-zoom-in"),a.css("cursor","-moz-zoom-in"),a.css("cursor","zoom-in")),f=!0):f=!1;e=Math.min(l,e);g=Math.min(m-20,g);c.css({"margin-top":(d-
g)/2,"margin-left":(b-e)/2,height:g,width:e});a.css("visibility","visible");B=!1}function l(a){var b=u.find("#ivLargeImage");b.css("visibility","hidden");b.empty();k.animateStageIn(b);b.append(a);p()}function x(d){u.find("#ivLargeImage").css("display","none");u.find("#ivLargeImage").css("display","block");var e;"hero-image"===d?b.isDefined(z)&&(e=c(z[K.index])):b.isDefined(E)&&(e=c(E[K.index]));if(b.isDefined(e)){u.find(".fullscreen").remove();var f=a("\x3cimg\x3e").attr("src",e).addClass("fullscreen"),
g=u.find("#ivLargeImage");k.animateStageOut(g,function(){f.load(function(){l(f)});if(f[0].complete)l(f);else{g.empty();var b=(g.height()-104)/2,d=(g.width()-80)/2;a("\x3cimg\x3e").attr("src",h.staticImages.spinner).css({position:"relative",top:b+"px",left:d+"px"}).appendTo(g)}})}}function t(a){u.find(".ivThumb").removeClass("selected");a.addClass("selected");a.hasClass("ivHeroImage")?K.type="hero-image":K.type="image";K.index=a.attr("id").split("_")[1];x(K.type);e.postCountMetric("dpcc_iv_thumbCLick_"+
(parseInt(K.index,10)+1)+"_"+(A+J))}function v(){u.delegate(".ivThumb","click",function(){var b=a(this);t(b)})}function y(a,b){return 0<b?b/2:Math.min(0,Math.max(b,a))}function F(a){var b=w.top-(a.pageY-I[1])*D;a=y(w.left-(a.pageX-I[0])*D,q.left);b=y(b,q.top);u.find(".fullscreen").css({left:a,top:b})}function L(){u.delegate("#ivLargeImage","click",function(a){if(B)p();else if(f){u.find(".fullscreen").removeAttr("style");if(f){var b=u.find("#ivLargeImage"),d=b.find(".fullscreen");G?b.css("cursor",
"url('"+h.staticImages.zoomOut+"'), auto"):(b.css("cursor","-webkit-zoom-out"),b.css("cursor","-moz-zoom-out"),b.css("cursor","zoom-out"));B=!0;var c=u.find("#ivLargeImage");q.left=c.width()-d.width();q.top=c.height()-d.height();var c=b.height()/2,g=b.width()/2;I=[b.offset().left+g,b.offset().top+c];w.top=c-d.height()/2;w.left=g-d.width()/2;d.css({position:"relative",left:w.left,top:w.top});D=Math.max(d.height()/b.height(),d.width()/b.width())}F(a);e.postCountMetric("dpcc_iv_largeImageCLick")}});
u.delegate("#ivLargeImage","mousemove",function(a){B&&F(a)})}function P(){u.find("#ivLargeImage").empty()}function M(c){if(S){u=a("#ivMain");m();K=n.getCurrentItem();d();k.populateVariationSelection(u.find("#ivVariationSelection"));c=u.find("#ivThumbs");c.find(".ivRow").not(".placeholder").remove();for(var e=A+J,f=0,h=0;f<e;)for(var g=c.find(".ivRow.placeholder").clone().removeClass("placeholder").appendTo(c),l=0;4>l&&f<e;l++,f++,h++)if(h<A){var p=z[f].thumb,q=c.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("ivHeroImage").attr("id",
"ivHeroImage_"+f).appendTo(g);q.find(".ivThumbImage").css("background",'url("'+k.getResizedThumbnailURL(p)+'") center no-repeat')}else h>=A&&h<J+A&&(p=E[f-A].thumb,q=c.find(".ivThumb.placeholder").clone().removeClass("placeholder").attr("id","ivImage_"+(f-A)).appendTo(g),q.find(".ivThumbImage").css("background",'url("'+k.getResizedThumbnailURL(p)+'") center no-repeat'));R();S=!1}else d();c=a("#ivImagesTab").height();u.css("height",c);e=u.find("#ivTitle").outerHeight(!0);f=u.find("#ivVariationSelection").outerHeight(!0);
h=u.find("#ivThumbs");g=k.getDimension(h,"margin-top")+k.getDimension(h,"margin-bottom");h.css("height",c-e-f-g);u.find("#ivLargeImage").css("height",c);c=u.find("#ivStage");e=u[0]&&u[0].getBoundingClientRect&&Math.floor(u[0].getBoundingClientRect().width)||u.width();c.css("width",e-k.getDimension(u,"padding-left")-k.getDimension(u,"padding-right")-u.find("#ivThumbColumn").width()-k.getDimension(c,"margin-left")-k.getDimension(c,"margin-right"));K=n.getCurrentItem();c="hero-image"===K.type?u.find("#ivHeroImage_"+
K.index):"image"===K.type?u.find("#ivImage_"+K.index):b.isDefined(z)?u.find("#ivHeroImage_"+K.index):u.find("#ivImage_"+K.index);b.isjQueryObjDefined(c)||(c=u.find("#ivImage_0"));t(c)}var N,h,n,u,z,E,A,J,K,G=navigator.userAgent.match(/msie|trident/i),S=!0,B=!1,f=!1,q={},w={},D,I,S=!0,R=g.once(function(){v();L();k.attachImmersiveViewResizeHandler(M);k.attachTabDeselectHandler("ivImagesTab",P)});return function(b,c,d,e){N=this;h=b;n=c;N.render=function(b,c,d,e,f,h){S=!0;m();0===A+J?k.hideTabHeading("ivImagesTabHeading"):
k.unhideTabHeading("ivImagesTabHeading");1===A+J?a("#ivThumbs").hide():a("#ivThumbs").show()};N.update=function(a){};k.attachTabSelectHandler("ivImagesTab",M)}});"use strict";v.when("A","jQuery","imageBlockUtils","postMetric","imageBlockImmersiveViewUtils","vse_ns_preLoaderHook","vse_ns_lazyLoaderHook").register("ImageBlockImmersiveViewVideos",function(g,a,b,e,k,d,m){function c(){A.delegate(".ivThumb","click",function(){var b=a(this);A.find(".ivThumb").removeClass("selected");b.addClass("selected");
b.hasClass("ivThumbVideo")&&(J.type="chromeful-video",J.index=b.attr("id").split("_")[1])})}function p(){if(V){var b=a("#ivVideosTab").height();A.css("height",b);var c=A.find(".vse-lb-container");K=b-k.getDimension(c,"padding-top")-k.getDimension(c,"padding-bottom");c.css({"max-height":b,overflow:"hidden"});if(U){A.css({"max-width":Math.floor(1.77*K)});return}var b=A.find(".vse-player-container"),c=A.find(".vse-video-action-strip"),d=A.find(".vse-lb-video-metadata"),e=Math.floor(K-k.getDimension(d,
"height")-k.getDimension(c,"height")),f=Math.floor(1.77*e);b.css({"max-height":e,"max-width":f,marginLeft:"auto",marginRight:"auto"});d.css({"max-width":f,marginLeft:"auto",marginRight:"auto"});c.css({"max-width":f,marginLeft:"auto",marginRight:"auto"})}T&&(b=A.find(".vse-vertical-scroll"),c=k.getDimension(b,"margin-top")+k.getDimension(b,"margin-bottom"),b.css("max-height",K-c))}function l(){x();G&&G.pause();aa=!1;R=!0;q=null;ha=!0;V=!1}function x(){aa=!1;G&&G.pause()}function v(c){q=c.clickTimeStamp?
c.clickTimeStamp:g.now();b.isDefined(E)&&(E.eventTimestamp=q);aa=!0;W&&(m.get(g,"#ivVideoBlock",z,X,r),A=a("#ivVideoBlock"),u.getCurrentItem(),J=u.getCurrentItem(),C(),M());p();W=!1;F()}function Q(b){W&&(A=a("#ivVideoBlock"),u.getCurrentItem(),J=u.getCurrentItem(),C());aa&&F();p()}function y(a){G=a.player;e.postTimeMetric("vse_ib_desktop_player_initialisation_duration",g.now()-da);n.imageBlockRenderingStartTime&&e.postTimeMetric("vse_ib_desktop_time_to_player_interactive",g.now()-n.imageBlockRenderingStartTime);
V&&(M(),F())}function F(){if(G&&aa&&(A.find(".vse-lb-container").animate({opacity:1},200),G.play(E),e.postCountMetric("dpcc_vse_videoBlock_video_played"),R)){var a=t.ue;a&&(a=a.count("dpcc_vse_videoingressclick"),a=(new Date).getTime()-a,e.postTimeMetric("dpcc_vse_vitff",a),R=!1)}}function L(){g.trigger("vse:detailpage-imageblock:page:lightBoxClosed")}function P(a){S=a.popover.$popover;V=!0;M()}function M(){if(V&&ha&&aa&&G){S.addClass(g.$(S).find(".vse-lb-container").data("cssClass"));var a=E;ea&&
(a=Y,ea=!1);g.trigger("vse:detailpage-imageblock:page:lightBoxOpened",{lightBoxId:"ivVideoBlock",assetSpec:a});p();ha=!1}}function N(a){document.getElementsByClassName("videoBlockIngress")[0].click();Y=a;ea=!0}var h,n,u,z,E,A,J,K,G,S,B,f,q,w,D,I,R=!0,W=!0,U=!1,T=!1,aa=!1,ha=!0,V=!1,ea=!1,Y,da=0,C=g.once(function(){c();k.attachImmersiveViewResizeHandler(Q);k.attachTabDeselectHandler("ivVideosTab",x);k.attachImmersiveViewResetHandler(l)}),ca=function(c,d,f){a("#ivVideoBlockSpinner").addClass("aok-hidden");
e.postCountMetric("dpcc_vse_videoBlock_preload_failed_"+d.placement);c=u.getCurrentItem().color;c=b.getVideoHash(c,0,n);G||(G=b.createAiryInstanceForChromeful(a("#ivVideoBlock"),c,n.airyConfig,"ImmersiveView"));U=!0;a("#ivVideoBlock").css({"max-width":1.77*K,margin:"0 auto"});aa&&U&&G.play({isAsync:!0})},ja=function(b,c,d){W||m.get(b,"#ivVideoBlock",z,X,r);a("#ivVideoBlockSpinner").addClass("aok-hidden")},X=function(a,b,c){T=!0;p()},r=function(a,b,c){e.postCountMetric("dpcc_vse_videoBlock_lazyload_failed_"+
b.pageContext.placement+"_"+b.configuration.type)};return function(a,c,e,m){h=this;n=a;u=c;h.render=function(a,c,e,h,m,l){a=u.getCurrentItem().color;c=b.getVideoHash(a,0,n);!0===l?B=n.mediaAsin:(B=n.colorToAsin[a]&&n.colorToAsin[a].asin,B=b.isDefined(B)?B:n.mediaAsin);f=null!==n.vseVideoDataSourceTreatment&&"T1"===n.vseVideoDataSourceTreatment?"ASIN":"physicalID";w=n.contentWeblab;D=n.contentWeblabTreatment;I=n.parentAsin||"";W=!0;-1===c?k.hideTabHeading("ivVideosTabHeading"):(k.unhideTabHeading("ivVideosTabHeading"),
z={page:"DetailPage",placement:"ImageBlock",device:"Desktop",marketplaceID:c.marketPlaceID,locale:c.languageCode,product:{contentID:B,contentIDType:"ASIN",parentContentID:I,parentContentIDType:"ASIN"},video:{contentID:c.mediaObjectId,contentIDType:f,videoURL:c.url,imageURL:c.slateUrl},requestId:n.dpRequestId,weblabContext:[{name:w,assignment:D,ignoreForG2S2Key:!0}],metadata:{ProductTitle:n.title}},E={videoUrl:z.video.videoURL,contentId:z.video.contentID,duration:0,vendorCode:"",eventTimestamp:b.isDefined(q)?
q:g.now(),imageUrl:z.video.imageURL,productAsin:z.product.contentID,index:0},b.isDefinedAndNotEmpty(G)&&(G.destroy(),G=null),da=g.now(),d.get(g,"#ivVideoBlock",z,ja,ca))};h.update=function(a){};k.attachTabSelectHandler("ivVideosTab",v);g.on("vsePlayer-detailpage-imageblock",y);g.on("a:popover:afterShow:immersiveView",P);g.on("a:popover:beforeHide:immersiveView",L);g.on("detailpage-imageblock-leave-pip",N)}});"use strict";v.when("A","jQuery","imageBlockUtils","ImageBlockLoader","nexusLogger360","postMetric",
"imageBlockImmersiveViewUtils","hit-spin360-feature-data","hit-spin360-constants").register("ImageBlockImmersiveView360",function(g,a,b,e,k,d,m,c,p){function l(){var b=a("#iv360Tab").height();D.css("height",b);var c=D.find("#ivTitle360").outerHeight(!0),d=D.find("#ivVariationSelection360").outerHeight(!0),e=D.find("#ivThumbs360"),f=m.getDimension(e,"margin-top")+m.getDimension(e,"margin-bottom");e.css("height",b-c-d-f);b=D.find("#ivStage360");c=D[0]&&D[0].getBoundingClientRect&&Math.floor(D[0].getBoundingClientRect().width)||
D.width();b.css("width",c-m.getDimension(D,"padding-left")-m.getDimension(D,"padding-right")-D.find("#ivThumbColumn360").width()-m.getDimension(b,"margin-left")-m.getDimension(b,"margin-right"))}function t(){F();var a=D.find("#ivLarge360");a.css({opacity:0});setTimeout(function(){a.css({opacity:.4});m.animateStageIn(a)},200);v()}function v(){if(0<r){var a=D.find(".iv360Hint");a.removeClass("iv360HintFaded");a.animate({opacity:1},200)}}function Q(b,c){if(r<b.length){var e=a("\x3cimg /\x3e").css({display:"block",
width:6*R+"px",height:W+"px"});e.hide();c.append(e);e.get(0).onload=function(){c.closest(document.documentElement).length&&(r++,1===r&&(v(),0<C&&(k.time("dppc_loadTime360",Date.now()-C,f.mediaAsin),d.postTimeMetric("dppc_loadTime360",Date.now()-C))),0<ca&&(k.time("dppc_perSpriteloadTime360",Date.now()-ca,f.mediaAsin),d.postTimeMetric("dppc_perSpriteloadTime360",Date.now()-ca)),D.find("#iv360Spinner").hide(),e.show(),Y=5*I.imageLocations[Math.floor(da/I.imageLocations[0].length)][da%I.imageLocations[0].length],
Q(b,c))};e.attr("src",b[r].replace(/(\._SP)\d+(,)\d+/,"$1"+T+"$2"+U));ca=Date.now()}}function y(a){if(b.isDefined(I.spriteWidthSizes)&&0<I.spriteWidthSizes.length){var c=I.spriteWidthSizes,d=c.length,e=c[0],f=c[d-1];if(a<=e)return e;if(a>f)return f;for(e=0;e<d;e++)if(a>c[e]&&a<=c[e+1])return c[e+1]}else return a}function F(){var b=D.find("#ivLarge360");b.children("#image-360-sprites").length||(b.append("\x3cdiv id\x3d'image-360-sprites'\x3e\x3c/div\x3e"),b.css({"margin-left":0,"margin-top":0,width:b.parent().width(),
height:b.parent().height(),overflow:"hidden",position:"relative","-ms-user-select":"none","-webkit-user-select":"none","-mos-user-select":"none"}),a("\x3cimg\x3e").attr("src",f.staticImages.spinnerNoLabel).attr("id","iv360Spinner").css({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",display:"block"}).appendTo(b),V=!0,L())}function L(){if(b.isDefined(I.spriteURLs)&&b.isDefined(D)&&V&&!oa){var c=D.find("#ivLarge360"),d=a("\x3cdiv\x3e").addClass("iv360Hint").css({position:"absolute",
width:"100%",bottom:0,opacity:0,display:"block"});b.isDefined(I.staticImages.hint360)&&a("\x3cimg\x3e").css({"margin-left":"auto","margin-right":"auto",display:"block"}).attr("src",I.staticImages.hint360).appendTo(d);a("\x3cdiv\x3e").css({"text-align":"center"}).text(f.staticStrings.dragToSpin).appendTo(d);d.appendTo(c);var d=I.imageWidth,e=I.imageHeight,g=c.parent().width(),k=c.parent().height(),m=0,l=0;d/e>g/k?(T=y(g),U=Math.round(e/d*T),R=Math.ceil(g),W=Math.ceil(U/T*g),l=(k-W)/2):(U=y(k),T=Math.round(d/
e*U),W=Math.ceil(k),R=Math.ceil(T/U*k),m=(g-R)/2);c.css({"margin-left":m,"margin-top":l,width:R+"px",height:W+"px",overflow:"hidden",position:"relative"});c.children("#image-360-sprites").css("width",6*R+"px");Q(I.spriteURLs,D.find("#image-360-sprites"),0);d=D.find("#ivLarge360");d.bind("mousedown",h);d.bind("touchstart",P);d.bind("touchmove",M);d.bind("touchend",N);a(document).bind("mousemove",n);a(document).bind("mouseup",u);b.isDefined(f.staticImages.grab)&&c.css("cursor","url('"+f.staticImages.grab+
"'), auto");oa=!0}}function P(a){X=!0;ha=a.originalEvent.targetTouches[0].clientX}function M(a){X&&(z(a.originalEvent.targetTouches[0].clientX-ha),ha=a.originalEvent.targetTouches[0].clientX)}function N(a){X&&(X=!1)}function h(a){ja=!0;aa=a.originalEvent.clientX;b.isDefined(f.staticImages.grabbing)&&(a=D.find("#ivLarge360"),a.css("cursor","url('"+f.staticImages.grabbing+"'), auto"),a.parents(".a-declarative").last().css("cursor","url('"+f.staticImages.grabbing+"'), auto"));return!1}function n(a){ja&&
(z(a.originalEvent.clientX-aa),aa=a.originalEvent.clientX)}function u(a){ja&&(ja=!1,b.isDefined(f.staticImages.grab)&&(a=D.find("#ivLarge360"),a.css("cursor","url('"+f.staticImages.grab+"'), auto"),a.parents(".a-declarative").last().css("cursor","auto")))}function z(a){Y-=a/R*180;la&&(k.count("dppc_360dragToSpin",f.mediaAsin),d.postCountMetric("dppc_360dragToSpin"));la=!1;for(a=Y;0>a;)a+=360;for(;360<a;)a-=360;Y=a;var c;a=360;for(var e=0;e<r;e++)for(var h=0;h<I.imageLocations[e].length;h++){var g=
Math.abs(Y-5*I.imageLocations[e][h]);g<a&&(a=g,c=e*I.imageLocations[0].length+h)}c!==da&&(a=Math.floor(c/I.imageLocations[0].length),a!==Math.floor(da/I.imageLocations[0].length)&&(b.isDefined(ka)||(ka=document.createElement("canvas").getContext("2d")),e=D.find("#image-360-sprites").children(),ka.drawImage(e[a],0,0)),a=D.find(".iv360Hint").not(".iv360HintFaded"),b.isDefined(a)&&(a.addClass("iv360HintFaded"),a.animate({opacity:0},750)));da=c;a=c%I.imageLocations[0].length*-1*R;c=-1*Math.floor(c/I.imageLocations[0].length)*
W;e=D.find("#ivLarge360").children("#image-360-sprites");e.css("-webkit-transform","translate3d("+a+"px, "+c+"px, 0)");e.css("transform","translate3d("+a+"px, "+c+"px, 0)")}function E(){if(ba){D=a("#ivMain360");var b=q.getCurrentItem().color;J()&&K(b);I=J()?f.spin360ColorData[b]:ea;m.populateTitle(D.find("#ivTitle360"),160,f);m.populateVariationSelection(D.find("#ivVariationSelection360"));D.find("#ivLarge360").empty();r=0;oa=V=!1;da=Y=0;fa();ba=!1}0!==a("#iv360Tab").height()&&(m.detachImmersiveViewResizeHandler(E),
l(),t(),C=Date.now(),ia=la=!0,k.count("dppc_click360",f.mediaAsin),d.postCountMetric("dppc_click360"))}function A(a,h,g){a=f.colorToAsin[g];var m={},l=500;if(!a||!a.asin)if(g===f.defaultColor)a={asin:f.winningAsin};else return;m.params={asin:a.asin};var n="360"+a.asin,p=Date.now();m.success=function(a){k.time("dppc_asyncRequestTime360",Date.now()-p,f.mediaAsin);d.postTimeMetric("dppc_asyncRequestTime360",Date.now()-p);a&&b.isDefined(a.spin360)?((a=a.spin360.spin360Model)&&c.setData(a),b.ajaxState(n,
"success")):m.error()};m.error=function(){k.count("dppc_asyncFailedTransient360",f.mediaAsin);d.postCountMetric("dppc_asyncFailedTransient360");k.time("dppc_asyncRequestTime360",Date.now()-p,f.mediaAsin);d.postTimeMetric("dppc_asyncRequestTime360",Date.now()-p);l*=2;16E3>=l?setTimeout(function(){p=Date.now();e.load("/gp/product/features/apparel-main-image/360.html",m)},l):(k.count("dppc_asyncFailed360",f.mediaAsin),d.postCountMetric("dppc_asyncFailed360"),b.ajaxState(n,"fail"))};b.ajaxState(n)&&"fail"!==
b.ajaxState(n)||(e.load("/gp/product/features/apparel-main-image/360.html",m),b.ajaxState(n,"sent"))}function J(){return f&&b.isDefined(f.spin360ConfigEnabled)&&f.spin360ConfigEnabled}function K(a){return b.isDefinedAndNotEmpty(f.spin360ColorData[a])?!0:b.isDefined(f.spin360LazyLoadEnabled)&&f.spin360LazyLoadEnabled}function G(){ia&&(k.time("dppc_duration360",Date.now()-C,f.mediaAsin),d.postTimeMetric("dppc_duration360",Date.now()-C),ia=!1)}function S(a){a=f.colorToAsin[a.color]&&f.colorToAsin[a.color].asin;
a||(a=f.mediaAsin);return a}var B,f,q,w,D,I,R,W,U,T,aa,ha,V=!1,oa=!1,Y=0,da=0,C=0,ca=0,ja=!1,X=!1,r=0,ka,la=!0,ia=!1,ba=!0,fa=g.once(function(){m.attachImmersiveViewResizeHandler(E);m.attachImmersiveViewResizeHandler(l);m.attachImmersiveViewResetHandler(G);m.attachTabDeselectHandler("iv360Tab",G)});return function(e,h,l,n){B=this;f=e;q=h;w=n;e=f.landingAsinColor;h=f.defaultColor;b.isDefined(f.staticImages.icon360)&&a("#imageBlock #altImages ul").find(".360IngressTemplate").find("img").attr("src",
m.addStyleCodeToURL(f.staticImages.icon360,"_FMpng_RI_"));J()&&(f.spin360ColorData||(f.spin360ColorData={}),e===h&&b.isDefinedAndEmpty(f.spin360ColorData[h])&&delete f.spin360ColorData[h]);g.on(p.TWISTER_DATA_EVENT,function(a){S(q.getCurrentItem())===a&&(I=c.getData(a),L(),a={type:"updatedData",data:q.getCurrentItem()},w.dispatch("updateView",a))});B.render=function(e,h,l,n,p,r){ba=!0;!J()||b.isDefinedAndEmpty(f.spin360ColorData[e])&&!c.getData(S(q.getCurrentItem()))?m.hideTabHeading("iv360TabHeading"):
(f.spin360ColorData[e]=c.getData(S(q.getCurrentItem())),b.isDefinedAndNotEmpty(f.spin360ColorData[e])?(a("#ivThumbs360").hide(),m.unhideTabHeading("iv360TabHeading"),b.isImmersiveViewEnabled(f,q.getCurrentItem().color)&&J()&&K(e)&&(h===f.maxAlts&&(e=n.find(".item.imageThumbnail"),h=n.find(".item.videoThumbnail"),b.isDefined(h)&&1<h.length?h.last().remove():e.last().remove()),e=n.find(".360IngressTemplate").clone().removeClass("360IngressTemplate").removeClass("aok-hidden").addClass("item"),g.declarative.create(e,
"button-360-click"),n.append(e),k.count("dppc_display360",f.mediaAsin),d.postCountMetric("dppc_display360"))):b.isDefined(f.spin360LazyLoadEnabled)&&f.spin360LazyLoadEnabled?(f.spin360ColorData[e]={},m.hideTabHeading("iv360TabHeading"),A(n,h,e)):m.hideTabHeading("iv360TabHeading"))};B.update=function(a){};m.attachTabSelectHandler("iv360Tab",E)}});v.register("nexusLogger360",function(){return{count:function(g,a){t.ue&&t.ue.event({asin:a,metricName:g,metricValue:1},"hit-360","hit360.clientEvent.3")},
time:function(g,a,b){t.ue&&t.ue.event({asin:b,metricName:g,metricValue:a},"hit-360","hit360.clientEvent.3")}}});v.register("hit-spin360-constants",function(){return{TWISTER_DATA_EVENT:"spin360TwisterData"}});v.when("A","hit-spin360-constants").register("hit-spin360-feature-data",function(g,a){var b={};return{setData:function(e){var k=e.asin;b[k]||(b[k]=e,g.trigger(a.TWISTER_DATA_EVENT,k))},getData:function(a){return b[a]}}});"use strict";v.when("postMetric","imageBlockImmersiveViewUtils").execute("vse-ns-ajax-calls",
function(g,a){v.register("vse_ns_preLoaderHook",function(){function b(e,k){try{var d=e.A,m=e.block,c=e.request,p=e.handleFailure,l=e.handleSuccess,t=d.$;k--;var v=3-k-1,Q=d.now();d.ajax("/vap/ew/componentbuilder",{params:c,paramsFormat:"json",crossDomain:!0,method:"post",contentType:"application/json",timeout:c.timeout||5E3,withCredentials:!0,success:function(a){var b=d.now()-Q;g.postTimeMetric("vse_preLoaderHook:success:",b);g.postCountMetric("vse_preLoaderHook:success:"+c.page+":"+c.placement+":"+
v);t(m).html(a);l(d,c,a)},error:function(a){g.postCountMetric("vse_preLoaderHook:error:"+c.page+":"+c.placement+":"+v);(0===a.http.status||500<=a.http.status&&599>=a.http.status)&&0<k?b(e,k):(g.postCountMetric("vse_preLoaderHook:error:",1),p(d,c,a))}})}catch(y){a.logError("FATAL","vse_ns_desktop","[vse_ns_preLoaderHook] ",y)}}return{get:function(a,g,d,m,c){b({A:a,block:g,request:d,handleFailure:c,handleSuccess:m},3)}}});v.register("vse_ns_lazyLoaderHook",function(){function b(e,k,d){try{var m=e.A,
c=e.context,p=e.handleFailure,l=e.handleSuccess;k.attr("data-configuration");var t=atob(k.attr("data-configuration")),v=JSON.parse(t),Q={pageContext:c,configuration:v},y=m.now();d--;var F=3-d-1;m.ajax("/vap/ew/subcomponent/"+v.type,{params:Q,paramsFormat:"json",method:"post",contentType:"application/json",timeout:c.timeout||5E3,withCredentials:!0,success:function(a){var b=m.now()-y;g.postTimeMetric("vse_lazyLoaderHook:success:",b);g.postCountMetric("vse_lazyLoaderHook:success:"+c.page+":"+c.placement+
":"+v.type+":"+F);k.html(a);l(m,Q,a)},error:function(a){g.postCountMetric("vse_lazyLoaderHook:error:"+c.page+":"+c.placement+":"+v.type+":"+F);(0===a.http.status||500<=a.http.status&&599>=a.http.status)&&0<d?b(e,k,d):(g.postCountMetric("vse_lazyLoaderHook:error:",1),p(m,Q,a))}})}catch(L){a.logError("FATAL","vse_ns_desktop","[vse_ns_lazyLoaderHook] ",L)}}return{get:function(a,g,d,m,c){var p=a.$;p(g+" div[data-configuration]").each(function(){b({A:a,context:d,handleFailure:c,handleSuccess:m},p(this),
3)})}}});v.register("vse_ns_videoPlayer",function(){function b(e,k,d){try{var m=e.A,c=e.block,p=e.request,l=e.handleFailure,t=e.handleSuccess,v=m.$;d--;var Q=3-d-1,y=m.now();m.ajax("/vap/ew/subcomponent/vseplayer",{params:p,paramsFormat:"json",crossDomain:!0,method:"post",contentType:"application/json",timeout:p.timeout||5E3,withCredentials:!0,success:function(a){var b=m.now()-y;g.postTimeMetric("vse_lightPlayerLoaderHook:success:",b);g.postCountMetric("vse_lightPlayerLoaderHook:success:"+p.page+
":"+p.placement+":"+Q);v(c).html(a);t(m,p,a)},error:function(a){g.postCountMetric("vse_lightPlayerLoaderHook:error:"+p.page+":"+p.placement+":"+Q);(0===a.http.status||500<=a.http.status&&599>=a.http.status)&&0<d?b(e,d):(g.postCountMetric("vse_lightPlayerLoaderHook:error:",1),l(m,p,a))}})}catch(F){a.logError("FATAL","vse_ns_lightPlayer","[vse_ns_lightPlayerLoaderHook] ",F)}}return{get:function(a,g,d,m,c){b({A:a,block:g,request:d,handleFailure:c,handleSuccess:m},3)}}})});"use strict";v.when("A","ImageBlockATF",
"ImageBlockBTF","imageBlockUtils","postMetric").execute(function(g,a,b,e,k){var d=[0,50,100,500,1E3,2E3,3E3,3500];(function(){var a=b.colorImages,c=0,g;for(g in a)a[g]&&a[g].length&&(c+=a[g].length);a="image_size_bucket:gt"+d[d.length-1];for(g=1;g<d.length;g++)if(c<=d[g]){a="image_size_bucket:"+d[g-1]+"-"+d[g];break}k.postCountMetric(a);e.addTag(a)})();(function(){var b=a.colorImages;b&&b.initial&&b.initial.length&&(b=b.initial.length,t.ue&&ue.count&&ue.count("altImageCount",b))})();(function(){var a=
b.lazyLoadExperienceDisabled;e.isDefined(b.lazyLoadExperienceDisabled)&&!a&&(k.postCountMetric("lazyLoadingExperienceOnTwisterUpdateEnabled"),e.addTag("lazyLoadingExperienceOnTwisterUpdateEnabled"))})()});v.when("A","get-resource-time","postMetric","afterLoad").execute(function(g,a,b){var e=g.state("desktop-landing-image-data");e&&(e=g.values(e),a=a.getResourceTimeByName("img",e),g.each(a,function(a){a&&(a.responseEnd!=ea&&b.postCountMetric("ibDesktopLandingImageDownloadTime",t.parseInt(a.responseEnd)),
a.transferSize!=ea&&(0===a.transferSize?b.postCountMetric("ibDesktopLandingImageCached",1):(b.postCountMetric("ibDesktopLandingImageSizeInBytes",t.parseInt(a.transferSize)),b.postCountMetric("ibDesktopLandingImageNotCached",1))))}))});v.now().register("ImageBlockShoppableSceneView",function(){function g(){}return function(){this.update=this.render=g}});v.now().register("ShoppableSceneWeblabProvider",function(){return{isEnabled:!1}})});
/* ******** */
(function(f){var d=window.AmazonUIPageJS||window.P,k=d._namespace||d.attributeErrors,b=k?k("DetailPageShowroomImageBlockAssets",""):d;b.guardFatal?b.guardFatal(f)(b,window):b.execute(function(){f(b,window)})})(function(f,d,k){f.when("A","imageBlockUtils","showroom-lite-atf-feature-data","showroom-image-block-detail-page-rendering","showroom-image-block-constants","showroom-image-block-metrics").register("showroom-image-block-view",function(b,e,l,g,m,a){function d(h){h.interaction===k.MOUSE_ENTER&&
h.type===m.SHOWROOM_THUMBNAIL_TYPE&&g.isShowroomMainImageHidden()&&a.addOne(a.COUNTER_NAMES.SHOWROOM_IMAGEBLOCK_THUMBNAIL_HOVER)}function c(c,b){var m=new Date;c.interaction=b.type;c.isUserGenerated=!0;if(e.isImageBlockGridViewEnabled()){if("mouseenter"===b.type&&l.isDataValidForAsin(u(c))&&(d(c),r&&clearTimeout(r),r=setTimeout(function(){var a=l.getDataForAsin(u(c)).imageData;g.updateMainImage(h,a,p);g.showShowroomMainImage(h);n.usePeekHover||e.selectGivenThumbnail(b.$declarativeParent,t)},e.getHoveringDelayTimer())),
"mouseleave"===b.type&&r&&clearTimeout(r),"click"===b.type){if(l.isDataValidForAsin(u(c))){var f=l.getDataForAsin(u(c)).imageData;g.updateMainImage(h,f,p);g.showShowroomMainImage(h)}e.selectGivenThumbnail(b.$declarativeParent,t);e.useTabbedImmersiveView(n)&&g.handleShowroomThumbnailClick(b)}}else l.isDataValidForAsin(u(c))&&(d(c),f=l.getDataForAsin(u(c)).imageData,g.updateMainImage(h,f,p),g.showShowroomMainImage(h)),n.usePeekHover&&"click"!==b.type||(e.selectGivenThumbnail(b.$declarativeParent,t),
"click"===b.type&&e.useTabbedImmersiveView(n)&&g.handleShowroomThumbnailClick(b));a.logValue(a.TIMER_NAMES.SHOWROOM_IMAGEBLOCK_LATENCY_UPDATE_HANDLE_THUMBNAIL_EVENT,new Date-m)}function u(a){a=n.colorToAsin[a.color].asin;a||(a=n.mediaAsin);return a}var f=void 0,n=void 0,q=void 0,p=void 0,t=void 0,h=void 0,x=void 0,r=void 0,v=void 0,k={SWATCH_HOVER:"swatchHover",MOUSE_ENTER:"mouseenter"};return function(d,y,r,z){r=new Date;f=this;n=d;q=y;p=z;b.on(m.TWISTER_DATA_EVENT,function(a){u(q.getCurrentItem())===
a&&(a={type:"updatedData",data:q.getCurrentItem()},p.dispatch("updateView",a))});f.render=function(c,e,m,d,f,r){c=new Date;t=d;h=f.find("#main-showroom-container");h.parent().find("#showroom-canvas-caption");b.$("#main-image-container");try{var w=u(q.getCurrentItem());if(l.isDataValidForAsin(w)){var y=new Date,k=l.getDataForAsin(w);g.refresh(p,k.asin,k.defaultStageId);a.logValue(a.TIMER_NAMES.SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_GET_DATA_FOR_ASIN,new Date-y);if(!r){var v=new Date;g.updateMainImage(h,
k.imageData,p);a.logValue(a.TIMER_NAMES.SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_UPDATE_MAIN_IMAGE,new Date-v)}var z=new Date;e=g.createThumbnail(n,d,e,k.imageData);a.logValue(a.TIMER_NAMES.SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_CREATE_THUMBNAIL,new Date-z);var B=new Date;b.$("#ivShowroomTabHeading").removeClass("aok-hidden");a.logValue(a.TIMER_NAMES.SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_UNHIDE_TAB_HEADING,new Date-B);if(w!==x){var A=new Date;a.addOne(a.COUNTER_NAMES.SHOWROOM_IMAGEBLOCK_FEATURE_RENDERED);var C=
a.createShowroomAtfEvent(k.defaultStageId,w,a.EVENT_NAMES.IMAGEBLOCK_LOAD,a.STATUS_TYPES.SUCCESS);a.logShowroomAtfEvent(C);x=w;a.logValue(a.TIMER_NAMES.SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_LOG_EVENT,new Date-A)}}else b.$("#ivShowroomTabHeading").addClass("aok-hidden")}catch(E){b.$("#ivShowroomTabHeading").addClass("aok-hidden")}a.logValue(a.TIMER_NAMES.SHOWROOM_IMAGEBLOCK_LATENCY_RENDER,new Date-c);return e};f.update=function(b){var p=new Date;try{var t=b.data;q.setCurrentEvent(b);t.type===m.SHOWROOM_THUMBNAIL_TYPE?
c(t,b):t.type!==m.SHOWROOM_MAIN_IMAGE_TYPE&&(b.type===k.SWATCH_HOVER?t.color===q.getCurrentItem().color&&q.getCurrentItem().type===m.SHOWROOM_THUMBNAIL_TYPE?g.showShowroomMainImage(h):g.hideShowroomMainImage(h):e.isImageBlockGridViewEnabled()?("mouseenter"===b.type&&(v&&clearTimeout(v),v=setTimeout(function(){g.hideShowroomMainImage(h)},e.getHoveringDelayTimer())),"mouseleave"===b.type&&v&&clearTimeout(v),"click"===b.type&&g.hideShowroomMainImage(h)):g.hideShowroomMainImage(h))}catch(D){}a.logValue(a.TIMER_NAMES.SHOWROOM_IMAGEBLOCK_LATENCY_UPDATE,
new Date-p)};(d=document.getElementById("ivShowroomTabHeading"))&&d.addEventListener("click",function(b){a.addOne(a.COUNTER_NAMES.TAB_SELECT);b=l.getDataForAsin(x).defaultStageId;b=a.createShowroomAtfEvent(b,x,a.EVENT_NAMES.IMMERSIVE_VIEW_TAB_CLICK,a.STATUS_TYPES.SUCCESS);a.logShowroomAtfEvent(b)});a.logValue(a.TIMER_NAMES.SHOWROOM_IMAGEBLOCK_LATENCY_INVOKE,new Date-r)}});"use strict";f.register("showroom-image-block-constants",function(){return{SHOWROOM_THUMBNAIL_TYPE:"showroom-image",SHOWROOM_MAIN_IMAGE_TYPE:"showroom-main-image",
TWISTER_DATA_EVENT:"showroomTwisterData",STRING_IDS:{MAIN_IMAGE_OVERLAY_TEXT:"showroom_dp_imageblock_atf_main_image_overlay_text",MAIN_IMAGE_OVERLAY_TEXT_T1:"showroom_dp_imageblock_atf_main_image_overlay_text_T1",MAIN_IMAGE_OVERLAY_TEXT_T2:"showroom_dp_imageblock_atf_main_image_overlay_text_T2",MAIN_IMAGE_OVERLAY_ICON_URL:"showroom_dp_imageblock_atf_main_image_overlay_icon_url"}}});"use strict";f.when("A","jQuery","imageBlockUtils","showroom-lite-atf-feature-data","showroom-image-block-constants",
"showroom-image-block-metrics").register("showroom-image-block-detail-page-rendering",function(b,e,l,g,d,a){function f(b){a.addOne(a.COUNTER_NAMES.SHOWROOM_IMAGEBLOCK_MAIN_IMAGE_SELECT);var p=a.createShowroomAtfEvent(n,m,a.EVENT_NAMES.IMAGEBLOCK_MAIN_IMAGE_CLICK,a.STATUS_TYPES.SUCCESS);a.logShowroomAtfEvent(p);c(b)}function c(a){a.action="showroomIngressClick";a.data=q;k.dispatch("showroomIngressClick",a)}var m,k,n,q;return{createThumbnail:function(a,b,c,e){c===a.maxAlts&&(b.find(".item.imageThumbnail").last().remove(),
c--);q={type:"showroomIngress",index:0,thumbnailIndex:c,variant:e.variant};l.createThumbnail({type:d.SHOWROOM_THUMBNAIL_TYPE,index:0,thumbnailIndex:c,variant:e.variant},e.thumb,b,"showroom-imageblock-thumbnail");c++;return c},updateMainImage:function(a,c){var h=a.find("#showroom-main-image");h.length?h.attr("src",c.hiRes):(h=e('\x3cdiv id\x3d"showroom-main-image-container"\x3e                    \x3cimg src\x3d"'+c.hiRes+'" id\x3d"showroom-main-image"/\x3e                \x3c/div\x3e'),h.appendTo(a),
b.declarative.create(a,"showroom-image-action",q),b.declarative("showroom-image-action",["click"],f),"T2"===g.getTreatment()?(h.addClass("t2"),c=a.find("#showroom-main-image-overlay-container-t2"),c.length||(c=g.getStringValue(d.STRING_IDS.MAIN_IMAGE_OVERLAY_TEXT),h=g.getStringValue(d.STRING_IDS.MAIN_IMAGE_OVERLAY_TEXT_T2),c=e('                \x3cdiv id\x3d"showroom-main-image-overlay-container-t2"\x3e                    \x3cdiv style\x3d"padding-bottom: 10px;width: 40%;"\x3e                        \x3cspan id\x3d"showroom-main-image-overlay-subtext"\x3e'+
c+'\x3c/span\x3e                    \x3c/div\x3e                    \x3cspan class\x3d"a-button a-button-base"\x3e                        \x3cspan class\x3d"a-button-inner"\x3e                            \x3cinput class\x3d"a-button-input"\x3e                            \x3cspan class\x3d"a-button-text" id\x3d"showroom-main-image-overlay-button"\x3e                                \x3cimg id\x3d"showroom-main-image-overlay-icon" src\x3d"https://m.media-amazon.com/images/G/01/showroom/icon-lightbulb._CB628497379_.png"/\x3e'+
h+"\n                            \x3c/span\x3e                        \x3c/span\x3e                    \x3c/span\x3e                \x3c/div\x3e                "),c.appendTo(a))):(c=a.find("#showroom-main-image-overlay-container-t1"),c.length||(c=g.getStringValue(d.STRING_IDS.MAIN_IMAGE_OVERLAY_TEXT_T1),h=g.getStringValue(d.STRING_IDS.MAIN_IMAGE_OVERLAY_ICON_URL),c=e('                \x3cdiv id\x3d"showroom-main-image-overlay-container-t1"\x3e                    \x3cimg id\x3d"showroom-main-image-overlay-icon" src\x3d"'+
(h?h:"")+'"/\x3e                    \x3cdiv\x3e                        \x3cspan id\x3d"showroom-main-image-overlay-text"\x3e'+c+"\x3c/span\x3e                    \x3c/div\x3e                \x3c/div\x3e                "),c.appendTo(a))))},hideShowroomMainImage:function(a){a.parent().css("z-index",-1);a.parent().addClass("aok-hidden")},showShowroomMainImage:function(a){a.parent().css("z-index",2);a.parent().removeClass("aok-hidden")},isShowroomMainImageHidden:function(){return e("#showroom-outer-container").hasClass("aok-hidden")},
handleShowroomIngressClick:c,handleShowroomThumbnailClick:function(b){a.addOne(a.COUNTER_NAMES.SHOWROOM_IMAGEBLOCK_THUMBNAIL_SELECT);var e=a.createShowroomAtfEvent(n,m,a.EVENT_NAMES.IMAGEBLOCK_THUMBNAIL_CLICK,a.STATUS_TYPES.SUCCESS);a.logShowroomAtfEvent(e);c(b)},handleShowroomMainImageClick:f,refresh:function(a,c,b){k=a;m=c;n=b}}});"use strict";f.when("A").register("showroom-image-block-metrics",function(b){return{EVENT_NAMES:{IMAGEBLOCK_LOAD:"srm_atf_imageBlock_load",IMAGEBLOCK_THUMBNAIL_CLICK:"srm_atf_thumbnail_click",
IMAGEBLOCK_MAIN_IMAGE_CLICK:"srm_atf_main_image_click",IMMERSIVE_VIEW_TAB_CLICK:"srm_atf_iv_tab_click"},COUNTER_NAMES:{SHOWROOM_IMAGEBLOCK_FEATURE_RENDERED:"showroom:atf:imageBlock:feature:render",SHOWROOM_IMAGEBLOCK_THUMBNAIL_HOVER:"showroom:atf:imageBlock:thumbnail:hover",SHOWROOM_IMAGEBLOCK_THUMBNAIL_SELECT:"showroom:atf:imageBlock:thumbnail:select",SHOWROOM_IMAGEBLOCK_MAIN_IMAGE_SELECT:"showroom:atf:imageBlock:mainImage:select",SHOWROOM_IMAGEBLOCK_FAILED_TO_INITIALIZED_WEBLAB_TRIGGER:"showroom:atf:imageBlock:failedToInitializeWeblabTrigger"},
STATUS_TYPES:{SUCCESS:"success",ERROR:"error"},TIMER_NAMES:{SHOWROOM_IMAGEBLOCK_LATENCY_INVOKE:"showroom:atf:imageBlock:latency:invoke",SHOWROOM_IMAGEBLOCK_LATENCY_LOAD:"showroom:atf:imageBlock:latency:load",SHOWROOM_IMAGEBLOCK_LATENCY_RENDER:"showroom:atf:imageBlock:latency:render",SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_GET_DATA_FOR_ASIN:"showroom:atf:imageBlock:latency:render:getDataForAsin",SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_UPDATE_MAIN_IMAGE:"showroom:atf:imageBlock:latency:render:updateMainImage",
SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_CREATE_THUMBNAIL:"showroom:atf:imageBlock:latency:render:createThumbnail",SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_UTIL_CREATE_THUMBNAIL:"showroom:atf:imageBlock:latency:render:utilCreateThumbnail",SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_UNHIDE_TAB_HEADING:"showroom:atf:imageBlock:latency:render:unhideTabHeading",SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_LOG_EVENT:"showroom:atf:imageBlock:latency:render:logEvent",SHOWROOM_IMAGEBLOCK_LATENCY_UPDATE:"showroom:atf:imageBlock:latency:update",
SHOWROOM_IMAGEBLOCK_LATENCY_UPDATE_HANDLE_THUMBNAIL_EVENT:"showroom:atf:imageBlock:latency:update:handleThumbnailEvent"},addOne:function(b){try{if(d.ue&&b){var e=(d.ue.count(b)||0)+1;d.ue.count(b,e)}}catch(g){}},logValue:function(b,f){try{d.ue&&b&&"number"===typeof f&&d.ue.count(b,f)}catch(g){}},createShowroomAtfEvent:function(e,d,g,f){var a={};a.showroomId=e;a.asin=d;a.eventType=g;a.status=f;a.device=b.capabilities?b.capabilities.isAmazonApp?"AmazonApp":b.capabilities.mobile?"mobile":b.capabilities.tablet?
"tablet":"desktop":"";a.userAgent=navigator?navigator.userAgent:"";a.producerId="showroom_atf";a.schemaId="com.amazon.showroom.ingress.clientEvent.3";return a},logShowroomAtfEvent:function(b){try{d.ue&&d.ue.event&&b&&d.ue.event(b,"showroom_atf","com.amazon.showroom.ingress.clientEvent.3")}catch(l){}}}});"use strict";f.when("A","showroom-image-block-constants").register("showroom-lite-atf-feature-data",function(b,d){function e(){return f[a]}function g(a){return a in f}var f={},a,k="T1";return{setData:function(c){c&&
c.asin&&c.imageDomain&&c.defaultCollageUrl&&c.defaultStageId&&Array.isArray(c.itemMainImagePhysicalIds)&&(a=c.asin,c.experimentTreatment&&(k=c.experimentTreatment),g(c.asin)||(f[c.asin]=c,b.trigger(d.TWISTER_DATA_EVENT,c.asin)))},getDataForCurrentAsin:e,getDataForAsin:function(a){return f[a]},getStringValue:function(a){return e().displayStrings?e().displayStrings[a]:""},getTreatment:function(){return k},isDataValidForAsin:g}})});
/* ******** */
