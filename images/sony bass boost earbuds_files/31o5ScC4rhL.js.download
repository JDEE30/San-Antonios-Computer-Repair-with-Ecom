(function(r){var v=window.AmazonUIPageJS||window.P,h=v._namespace||v.attributeErrors,d=h?h("DetailPageTwisterViewAsset",""):v;d.guardFatal?d.guardFatal(r)(d,window):d.execute(function(){r(d,window)})})(function(r,v,h){r.when("A","dp-refresh-handler","view-util","twister-string-constants","dp-interactive-page-refresh-handler","twister-dimension-subview-promise-handler").register("page-refresh-view",function(d,H,f,n,w,x){function t(x,u,l){function t(b){return{chunk:function(c){var b=c.ASIN,m=c.Value;
c=c.FeatureName;if(!k.hiddenFeatures[c]){var a=c,g,e;try{a&&m&&m.content&&(e=m.content[a],"undefined"!==typeof e&&(g=q("#"+a),g.html(e),g.removeClass("js-feature-refresh-overlay"),g.css({opacity:""})))}catch(l){a=a||"NoFeatureName",A.logFatal(l,{message:"Error in feature"+a})}k.twisterRefreshHandler.stampFeature(a,b);"twister-slot-price_feature_div"==c&&(b=m?m.content:null,g=q(".swatchSelect .twisterSwatchPrice").html(),m=q(".swatchSelect .price_slot_ppu").html(),g&&b&&b.priceToSet&&(g=d.trim(g),
b.priceToSet!==g&&(q(".swatchSelect .twisterSwatchPrice").html(b.priceToSet),y("twisterUpdatePriceMismatch"))),m&&b&&b.hasPricePerUnit&&b.pricePerUnitDisplay&&(m=d.trim(m),b.pricePerUnitDisplay!==m&&(q(".swatchSelect .price_slot_ppu").html(b.pricePerUnitDisplay),y("twisterUpdatePricePerUnitMismatch"))))}},success:function(b,p,m){y("twisterUpdateSuccess");w.updateRenderTime()},error:function(b,p,m){Twister.$("#variations-overlay").hide();y("twisterUpdateFailure");Twister.showErrorMessageOnFailure&&
(alert(Twister.errorMessageOnFailure),location.reload())},abort:function(b){A.logFatal("Ajax aborted: "+b)},timeout:4E4}}function C(b,c,p,m,a){var g=[];"parent"===b?(c=B(c,m,"parent",a),g.parent=c,c=B(p,m,"partial",a),g.partial=c):(c=B(p,m,b,a),g[b]=c);return g}function D(b,c,p,m,a){for(var g in b)if(b.hasOwnProperty(g)){if("full"===g){var e=p.dimensionType,l=k.twisterUtil.getDimensionInfo().length,n=p.dimensionDisplayType,f=p.newAsin,w=a&&(d.state("dp-twister-csm")||{}).updateCSMPageTypeId;k.twisterRefreshHandler.startMeasurement(f,
e,l,n,w?f:h,w?["is-twister","parentAsin-"+E]:h)}e=b[g].twisterRefreshParams;l=b[g].notifyClientParams;a&&(n=k.config[g].affectedFeatures,q(n).addClass("js-feature-refresh-overlay"),q(n).css({opacity:.5}),k.twisterRefreshHandler.doPageRefresh(null,e,c,m));K(l.asin,l.id,g,a)}}function e(){q.each(u.contextMetaData,function(b,c){var p={};c=c.elementList||[];var m=c.length,a=[];p.click={};p.mouseOver={};for(var g=0;g<m;g++){var e=q("#"+c[g].divToUpdate);a.push("#"+c[g].divToUpdate);e.length&&c[g].customClientFunction&&
(c[g].updateOnHover&&(p.mouseOver[c[g].divToUpdate]=e.attr("customfunctionname")),p.click[c[g].divToUpdate]=e.attr("customfunctionname"))}k.config[b].affectedFeatures=a.join(",");k.config[b].clientFeatures=p})}function K(b,c,p,m){var a="",a=m?n.EVENT_TYPE_CLICK:n.EVENT_TYPE_MOUSEOVER;q.each(k.config[p].clientFeatures[a],function(a,m){try{var p=function(){k.twisterRefreshHandler.stampImageLoad(b)};(function(){var a={};a.P=r;(function(){eval("var P \x3d this.P;");eval("0, "+m)(c,DetailPage.StateController,
p)}).call(a)})()}catch(e){A.logFatal("Client feature - "+a+", threw and exception :- "+e)}})}function B(b,c,p,m){var a={},g={};a.asinList=b;a.id="parent"===p?b:"partial"===m?c:b;a.mType=p;a=L(p,a);p=!1;(m=d.state("pwState"))&&(p=m.isTryState);p&&(a.isTryState=p);a=k.twisterRefreshHandler.createCustomParamsMap({},a);g.asin=b;g.id=c;return{twisterRefreshParams:a,notifyClientParams:g}}function L(b,c){q.each(u.contextMetaData[b].mTypeSpecificURLParams,function(b,m){c[b]=m});return c}function M(b){b=k.twisterUtil.getSelectionInfoFromSelectedVariationValuesMap(b.selected_variation_values);
k.twisterUtil.isFullySelected(b)?k.currentPageSelectionState="full":k.currentPageSelectionState="partial"}function N(b){var c={};c.config=b.measurement;c.dimensionDisplayType=b.dimensionsDisplayType;c.storeID=b.storeID;c.productGroupID=b.productGroupID;return c}function O(b){b=b.immutableURLPrefix;var c=null;b&&-1!=b.indexOf("?")&&(b=b.split("?")[1],0<b.length&&(c={},b=b.split("\x26"),d.each(b,function(b){b=b.split("\x3d");c[b[0]]=b[1]})),c.isFlushing=2,c.dpEnvironment=Twister.dpEnvironment);return c}
function F(b,c){var e;"partial"===b&&"partial"===c&&(e="partial");"partial"===b&&"full"===c&&(e="full");"full"===b&&"partial"===c&&(e="parent");"full"===b&&"full"===c&&(e="full");return e}var k=this,E=u.parent_asin,z=v.ue,G="",A=new l("dpTwisterPageRefreshView");this.twisterUtil=x.util;this.twisterFeatureName="Twister";this.currentPageSelectionState;this.twisterRefreshHandler;this.config={partial:{},full:{},parent:{},master:{}};this.hiddenFeatures={intermediateEOS:1,EOS:1};k.viewUtil=new f(x);k.subType;
var y=function(b){z&&z.count&&z.count(b,(z.count(b)||0)+1)};(function(){M(u);e();var b={featureName:k.twisterFeatureName},c=N(u);k.twisterRefreshHandler=new H(b,null,c);b=O(u.twisterUpdateURLInfo);k.twisterRefreshHandler.addParams(b);x.registerPassive({viewAttribution:"DetailPage",viewName:"WebTwisterRefreshView"},{updateView:function(b,c){var a={};if(b!==n.METADATA){var a={},e;e=h;if(c)switch(b){case n.VARIATION_CHANGE:e=c.selected().selInfo;break;case n.VARIATION_PEEK:e=c.peek().selInfo}a.selectionInfo=
e;a.dimensionCombination=k.viewUtil.getCurrDimCombId(a.selectionInfo,"_","X");e=k.twisterUtil.isFullySelected(a.dimensionCombination);a.childAsin=k.twisterUtil.getAsinFromSelectionInfo(a.selectionInfo,e);a.newPageSelectionState=e?"full":"partial";a.mTypeForRefresh=F(k.currentPageSelectionState,a.newPageSelectionState);a.newAsin="parent"===a.mTypeForRefresh?E:a.childAsin;a.doNotAbort="parent"===a.mTypeForRefresh?!0:!1;a.twisterCallListParams=C(a.mTypeForRefresh,a.newAsin,a.childAsin,a.dimensionCombination,
a.newPageSelectionState);a.optionsForTwisterRefresh=t(c);a.pageRefreshMeasure={newAsin:a.newAsin,dimensionType:G,dimensionDisplayType:u.dimensionsDisplayType}}switch(b){case n.VARIATION_CHANGE:k.subType!==n.PRODUCTIZED_VIEW_SUBTYPE&&(D(a.twisterCallListParams,a.optionsForTwisterRefresh,a.pageRefreshMeasure,a.doNotAbort,!0),k.currentPageSelectionState=a.newPageSelectionState,k.subType=h);break;case n.METADATA:switch(c.subType){case n.DP_STATE_VIEW_SUBTYPE:G=c.divMetadata.dimDisplayType;break;case n.PRODUCTIZED_VIEW_SUBTYPE:k.subType=
c.subType,a.dimensionCombination=c.newDimCombID,a.childAsin=c.childAsin,a.newAsin=c.newAsin,a.newPageSelectionState=k.twisterUtil.isFullySelected(a.dimensionCombination)?"full":"partial",a.mTypeForRefresh=F(k.currentPageSelectionState,a.newPageSelectionState),a.doNotAbort="parent"===a.mTypeForRefresh?!0:!1,a.twisterCallListParams=C(a.mTypeForRefresh,a.newAsin,a.childAsin,a.dimensionCombination,a.newPageSelectionState),a.optionsForTwisterRefresh=t(c),a.pageRefreshMeasure={newAsin:a.newAsin,dimensionType:c.divMetaData?
c.divMetaData.dimDisplayType:h,dimensionDisplayType:u.dimensionsDisplayType},D(a.twisterCallListParams,a.optionsForTwisterRefresh,a.pageRefreshMeasure,a.doNotAbort,!0),k.currentPageSelectionState=a.newPageSelectionState}}}})})()}var q=d.$;x.registerDimensionSubView("page-refresh-view",t);return t});r.when("A").register("twister-common-constants",function(d){return{FAMILY_SIZE_BUCKET_LIMITS:[0,3,8,25,50,100,1E3,5E3],DEFAULT_SELECTION_TAG:"defaultSelection",BottomSheet:{TRIGGERING_CRITERION_BOTTOMSHEET_OPEN:"onBottomsheetOpen",
BOTTOM_SHEET_SELECTOR:"#twister_bottom_sheet",OVERFLOW_THRESHOLD:8,BOTTOM_SHEET_INIT_TIME:"dpBottomSheetInitTime",PREFETCH_AJAX_CALLS_COMPLETED_EVENT:"prefetchAjaxCallsCompleted"},SortingFiltering:{PRICE_SORT_TOGGLE_SWITCH_CLICK_ON_METRIC:"DPBottomSheetSortingToggleSwitchClickOn",PRICE_SORT_TOGGLE_SWITCH_CLICK_OFF_METRIC:"DPBottomSheetSortingToggleSwitchClickOff",PRICE_SORT_TOGGLE_SWITCH_ENABLED_STATUS_METRIC:"DPBottomSheetPriceSortingToggleSwitchEnabledStatus",PRIME_FILTER_TOGGLE_SWITCH_CLICK_ON_METRIC:"DPBottomSheetPrimeFilteringToggleSwitchClickOn",
PRIME_FILTER_TOGGLE_SWITCH_CLICK_OFF_METRIC:"DPBottomSheetPrimeFilteringToggleSwitchClickOff",PRIME_FILTER_TOGGLE_SWITCH_ENABLED_STATUS_METRIC:"DPBottomSheetPrimeFilteringToggleSwitchEnabledStatus",SORTING_TYPE_PRICE:"price",SORTING_TYPE_UNSORTED:"unsorted",PREFETCH_AJAX_CALLS_COMPLETED_EVENT:"prefetchAjaxCallsCompleted",TOGGLE_SWITCH_STATE_OFF:"off",TOGGLE_SWITCH_STATE_ON:"on",PRICE_SORTING_ENABLED_PARAMETER:"priceSortingEnabled",PRICE_SORTING_PRIORITY_NAME_PARAMETER:"priceSortingPriorityName",ALTER_TYPE_NAME_PRICE:"price",
ALTER_TYPE_NAME_PRIME:"prime",ALTER_SUB_TYPE_ENABLE:"enable",ALTER_SUB_TYPE_DISABLE:"disable",ALTER_TYPE_SORT:"sort",ALTER_TYPE_FILTER:"filter",PRICE_SORT_TOGGLE_SWITCH_SELECTOR:".priceSortToggleSwitch",PRIME_FILTER_TOGGLE_SWITCH_SELECTOR:".primeFilterToggleSwitch",EXPERIMENT_PRICE_SORTING:"priceSorting",EXPERIMENT_PRIME_FILTERING:"primeFiltering",ATTRIBUTE_PRICE_SORTING_PRIORITY:"priorityName",ATTRIBUTE_SORT_BY_PRICE_STRING:"sortByPriceString",ATTRIBUTE_SORTED_BY_PRICE_STRING:"sortedByPriceString",
ATTRIBUTE_TOOL_NAME:"toolName",TOOL_TYPE_TOGGLE_SWITCH:"toggleSwitch"}}});"use strict";r.when("A","twister-util","ready").execute(function(d,r){var f=v.ue;if(d.state("dimensionKeyList")!==h)for(var n in d.state("dimensionKeyList").dimensionKeys)n!==h&&(d.on("a:popover:beforeShow:mobile-twister_"+n,function(n){d.state("twisterInteractability")===h&&f&&"function"===typeof f.count&&f.count("Twister:blankTwisterSecView",(f.count("Twister:blankTwisterSecView")||0)+1)}),d.on("a:popover:beforeHide:mobile-twister_"+
n,function(d){if(d&&d.popover){d=d.popover.getContent();var n=0<d.find(".aw-twister-row:first").length;d&&!n&&f&&"function"===typeof f.count&&f.count("blankTwisterSecondaryView",(f.count("blankTwisterSecondaryView")||0)+1)}}))});"use strict";r.when("A").register("twister-bottom-sheet-container",function(d){return{getInstance:function(){return this.sheetViewInstance},saveInstance:function(h){this.sheetViewInstance=h;d.trigger("dp:sheet:twister:initialized")}}});"use strict";r.when("A","a-sheet","jQuery",
"ready").execute(function(d,h,f){d.on("a:sheet:afterShow:bottom_sheet_mediaMatrix",function(){var d=f("#mediaMatrix_bottomSheet_view_div").find("#format-picker-scroller"),h=d.find("#selected-format"),r=h.offset().left,t=Math.abs(h.width()),h=Math.max(document.documentElement.clientWidth,v.innerWidth||0),t=h-t,q=d.scrollLeft();(r>t||0>=r)&&d.scrollLeft(q+r-h/3)})});r.when("A","view-util","twister-string-constants").register("hover-refresh-view",function(d,v,f){var n=d.$;return function(w,x,t){function q(){d.each(x.contextMetaData,
function(d,n){var e={};d=d.elementList||[];var h=d.length;e.mouseOver=[];for(var f=0;f<h;f++)d[f].customClientFunction&&d[f].updateOnHover&&e.mouseOver.push(d[f].divToUpdate);l.clientFeatures[n]=e})}function I(h,q){d.each(l.clientFeatures[q][f.EVENT_TYPE_MOUSEOVER],function(e){try{var d=n("#"+e),f;d.length&&(f=d.attr("customfunctionname"),function(){var e={};e.P=r;(function(){eval("var P \x3d this.P;");eval("0, "+f)(h,DetailPage.StateController)}).call(e)}())}catch(l){J.logFatal("Client feature - "+
feature+", threw and exception :- "+l)}})}function u(d){d=l.twisterUtil.getSelectionInfoFromSelectedVariationValuesMap(d.selected_variation_values);l.twisterUtil.isFullySelected(d)?l.currentPageSelectionState="full":l.currentPageSelectionState="partial"}var l=this,J=new t("dpTwisterHoverRefreshView");this.twisterUtil=w.util;this.twisterFeatureName="TwisterHover";this.currentPageSelectionState;this.clientFeatures={partial:{},full:{},parent:{},master:{}};l.viewUtil=new v(w);l.subType=h;(function(){function n(d){d=
l.viewUtil.getCurrDimCombId(d,"_","X");var e=l.twisterUtil.isFullySelected(d)?"full":"partial",f,h=l.currentPageSelectionState;"partial"===h&&"partial"===e&&(f="partial");"partial"===h&&"full"===e&&(f="full");"full"===h&&"partial"===e&&(f="parent");"full"===h&&"full"===e&&(f="full");e=[f];"parent"===f&&(e=["parent","partial"]);return{clientFeatureToRefresh:e,dimensionCombination:d}}u(x);q();w.registerPassive({viewAttribution:"DetailPageTwister",viewName:"WebTwisterHoverRefreshView"},{updateView:function(q,
e){switch(q){case f.VARIATION_PEEK:var r={};q=e.peek().selInfo;r=n(q);d.each(r.clientFeatureToRefresh,function(d){I(r.dimensionCombination,d)});case f.VARIATION_CHANGE:l.subType!==f.PRODUCTIZED_VIEW_SUBTYPE&&(q=e.selected().selInfo,e=l.viewUtil.getCurrDimCombId(q,"_","X"),l.currentPageSelectionState=l.twisterUtil.isFullySelected(e)?"full":"partial",l.subType=h);break;case f.METADATA:switch(e.subType){case f.PRODUCTIZED_VIEW_SUBTYPE:l.subType=e.subType,l.currentPageSelectionState=l.twisterUtil.isFullySelected(e.newDimCombID)?
"full":"partial"}}}})})()}})});