'use strict';mix_d("CrossBorderWidgetCards__cross-border-widget:cross-border-widget__VXkxOsZ9","exports tslib @c/scoped-dom @c/pagemarker @c/metrics @c/browser-operations @c/remote-operations".split(" "),function(e,f,t,u,g,v,w){function a(b){return b&&"object"===typeof b&&"default"in b?b:{"default":b}}var n=a(t),x=a(u),p=a(w),k;(k||(k={})).redericationButtonHandler="redericationButtonHandler";var q={publishNexusMetric:function(b,c){c.eventName=b;try{g.event(c,"cartman","cbw.logging_raw.1",{ssd:!0})}catch(y){g.count("publishCBWNexusMetricError",
1)}}};e._operationNames=["getNexusEventData","getValueHTML"];e.card=function(){return f.__awaiter(void 0,void 0,void 0,function(){var b,c,a,e;return f.__generator(this,function(h){switch(h.label){case 0:return g.count("CrossBorderWidgetTotalImpression",1),[4,x["default"].visible()];case 1:h.sent();b=n["default"].cardRoot.getElementsByClassName("_cross-border-widget_style_preload-widget__2xzSp")[0];c=b.dataset;if(void 0===c.asin||""===c.asin)return g.count("CBW_input_ASIN_NULL",1),[2,204];a=c.asin;
e=p["default"].setup();e.getValueHTML({asin:a}).then(function(c){return f.__awaiter(void 0,void 0,void 0,function(){var a,e,l,h,r,d,m;return f.__generator(this,function(f){switch(f.label){case 0:g.count("CrossBorderWidgetTotalAjaxResponse",1);b.appendChild(c);a=n["default"].cardRoot.getElementsByClassName("_cross-border-widget_style_cross-border-widget__JbgVu")[0].dataset;e="true"===a.isshowwidget;l=a.metricsprefix||"crossBorderWidget";if(!0!==e)return[3,2];g.count(l+"Impression",1);h=v.setup().define;
h(k.redericationButtonHandler,"click",function(a){g.count(l+"Click",1);q.publishNexusMetric("click",m)});r=p["default"].setup();return[4,r.getNexusEventData({})];case 1:return d=f.sent(),m={targetMarketplaceId:a.targetmarketplaceid,sourceMarketplaceId:d.sourceMarketplaceId,targetCountryCode:a.targetcountrycode,sourceCountryCode:d.sourceCountryCode,eventName:d.eventName,sessionId:d.sessionId,requestId:d.requestId,customerId:d.customerId,customerType:d.customerType,deviceType:d.deviceType,asin:a.asin},
q.publishNexusMetric("render",m),[3,3];case 2:throw Error("getValueHTML response null");case 3:return[2]}})})}).catch(function(a){return 204});return[2]}})})}});
